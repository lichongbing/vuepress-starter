{"remainingRequest":"/Users/lichongbing/Downloads/vuepress-starter/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/lichongbing/Downloads/vuepress-starter/docs/.vuepress/vuepress-plugin-code-style-mac/highlight.js/lib/highlight.js","dependencies":[{"path":"/Users/lichongbing/Downloads/vuepress-starter/docs/.vuepress/vuepress-plugin-code-style-mac/highlight.js/lib/highlight.js","mtime":1629789283203},{"path":"/Users/lichongbing/Downloads/vuepress-starter/node_modules/cache-loader/dist/cjs.js","mtime":1649504916945},{"path":"/Users/lichongbing/Downloads/vuepress-starter/node_modules/babel-loader/lib/index.js","mtime":1649504916858}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2YgPSByZXF1aXJlKCIvVXNlcnMvbGljaG9uZ2JpbmcvRG93bmxvYWRzL3Z1ZXByZXNzLXN0YXJ0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mLmpzIilbImRlZmF1bHQiXTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5jcmVhdGUuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRlc3QuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmV2ZXJzZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdWJzdHIuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuaXMtZnJvemVuLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZG90LWFsbC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24uYmluZC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5mcmVlemUuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1uYW1lcy5qcyIpOwoKLyoKU3ludGF4IGhpZ2hsaWdodGluZyB3aXRoIGxhbmd1YWdlIGF1dG9kZXRlY3Rpb24uCmh0dHBzOi8vaGlnaGxpZ2h0anMub3JnLwoqLwooZnVuY3Rpb24gKGZhY3RvcnkpIHsKICAvLyBGaW5kIHRoZSBnbG9iYWwgb2JqZWN0IGZvciBleHBvcnQgdG8gYm90aCB0aGUgYnJvd3NlciBhbmQgd2ViIHdvcmtlcnMuCiAgdmFyIGdsb2JhbE9iamVjdCA9ICh0eXBlb2Ygd2luZG93ID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZih3aW5kb3cpKSA9PT0gJ29iamVjdCcgJiYgd2luZG93IHx8ICh0eXBlb2Ygc2VsZiA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yoc2VsZikpID09PSAnb2JqZWN0JyAmJiBzZWxmOyAvLyBTZXR1cCBoaWdobGlnaHQuanMgZm9yIGRpZmZlcmVudCBlbnZpcm9ubWVudHMuIEZpcnN0IGlzIE5vZGUuanMgb3IKICAvLyBDb21tb25KUy4KICAvLyBgbm9kZVR5cGVgIGlzIGNoZWNrZWQgdG8gZW5zdXJlIHRoYXQgYGV4cG9ydHNgIGlzIG5vdCBhIEhUTUwgZWxlbWVudC4KCiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJyAmJiAhZXhwb3J0cy5ub2RlVHlwZSkgewogICAgZmFjdG9yeShleHBvcnRzKTsKICB9IGVsc2UgaWYgKGdsb2JhbE9iamVjdCkgewogICAgLy8gRXhwb3J0IGhsanMgZ2xvYmFsbHkgZXZlbiB3aGVuIHVzaW5nIEFNRCBmb3IgY2FzZXMgd2hlbiB0aGlzIHNjcmlwdAogICAgLy8gaXMgbG9hZGVkIHdpdGggb3RoZXJzIHRoYXQgbWF5IHN0aWxsIGV4cGVjdCBhIGdsb2JhbCBobGpzLgogICAgZ2xvYmFsT2JqZWN0LmhsanMgPSBmYWN0b3J5KHt9KTsgLy8gRmluYWxseSByZWdpc3RlciB0aGUgZ2xvYmFsIGhsanMgd2l0aCBBTUQuCgogICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewogICAgICBkZWZpbmUoW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZ2xvYmFsT2JqZWN0LmhsanM7CiAgICAgIH0pOwogICAgfQogIH0KfSkoZnVuY3Rpb24gKGhsanMpIHsKICB2YXIgc2hvd2VkVXBncmFkZVdhcm5pbmcgPSBmYWxzZTsgLy8gQ29udmVuaWVuY2UgdmFyaWFibGVzIGZvciBidWlsZC1pbiBvYmplY3RzCgogIHZhciBBcnJheVByb3RvID0gW10sCiAgICAgIG9iamVjdEtleXMgPSBPYmplY3Qua2V5czsgLy8gR2xvYmFsIGludGVybmFsIHZhcmlhYmxlcyB1c2VkIHdpdGhpbiB0aGUgaGlnaGxpZ2h0LmpzIGxpYnJhcnkuCgogIHZhciBsYW5ndWFnZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpLAogICAgICBhbGlhc2VzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsgLy8gc2FmZS9wcm9kdWN0aW9uIG1vZGUgLSBzd2FsbG93cyBtb3JlIGVycm9ycywgdHJpZXMgdG8ga2VlcCBydW5uaW5nCiAgLy8gZXZlbiBpZiBhIHNpbmdsZSBzeW50YXggb3IgcGFyc2UgaGl0cyBhIGZhdGFsIGVycm9yCgogIHZhciBTQUZFX01PREUgPSB0cnVlOyAvLyBSZWd1bGFyIGV4cHJlc3Npb25zIHVzZWQgdGhyb3VnaG91dCB0aGUgaGlnaGxpZ2h0LmpzIGxpYnJhcnkuCgogIHZhciBub0hpZ2hsaWdodFJlID0gL14obm8tP2hpZ2hsaWdodHxwbGFpbnx0ZXh0KSQvaSwKICAgICAgbGFuZ3VhZ2VQcmVmaXhSZSA9IC9cYmxhbmcoPzp1YWdlKT8tKFtcdy1dKylcYi9pLAogICAgICBmaXhNYXJrdXBSZSA9IC8oKF4oPFtePl0rPnxcdHwpK3woPzpcbikpKS9nbTsgLy8gVGhlIG9iamVjdCB3aWxsIGJlIGFzc2lnbmVkIGJ5IHRoZSBidWlsZCB0b29sLiBJdCB1c2VkIHRvIHN5bmNocm9uaXplIEFQSQogIC8vIG9mIGV4dGVybmFsIGxhbmd1YWdlIGZpbGVzIHdpdGggbWluaWZpZWQgdmVyc2lvbiBvZiB0aGUgaGlnaGxpZ2h0LmpzIGxpYnJhcnkuCgogIHZhciBBUElfUkVQTEFDRVM7CiAgdmFyIHNwYW5FbmRUYWcgPSAnPC9zcGFuPic7CiAgdmFyIExBTkdVQUdFX05PVF9GT1VORCA9ICJDb3VsZCBub3QgZmluZCB0aGUgbGFuZ3VhZ2UgJ3t9JywgZGlkIHlvdSBmb3JnZXQgdG8gbG9hZC9pbmNsdWRlIGEgbGFuZ3VhZ2UgbW9kdWxlPyI7IC8vIEdsb2JhbCBvcHRpb25zIHVzZWQgd2hlbiB3aXRoaW4gZXh0ZXJuYWwgQVBJcy4gVGhpcyBpcyBtb2RpZmllZCB3aGVuCiAgLy8gY2FsbGluZyB0aGUgYGhsanMuY29uZmlndXJlYCBmdW5jdGlvbi4KCiAgdmFyIG9wdGlvbnMgPSB7CiAgICBoaWRlVXBncmFkZVdhcm5pbmdBY2NlcHROb1N1cHBvcnRPclNlY3VyaXR5VXBkYXRlczogZmFsc2UsCiAgICBjbGFzc1ByZWZpeDogJ2hsanMtJywKICAgIHRhYlJlcGxhY2U6IG51bGwsCiAgICB1c2VCUjogZmFsc2UsCiAgICBsYW5ndWFnZXM6IHVuZGVmaW5lZAogIH07IC8vIGtleXdvcmRzIHRoYXQgc2hvdWxkIGhhdmUgbm8gZGVmYXVsdCByZWxldmFuY2UgdmFsdWUKCiAgdmFyIENPTU1PTl9LRVlXT1JEUyA9ICdvZiBhbmQgZm9yIGluIG5vdCBvciBpZiB0aGVuJy5zcGxpdCgnICcpOwogIC8qIFV0aWxpdHkgZnVuY3Rpb25zICovCgogIGZ1bmN0aW9uIGVzY2FwZSh2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKTsKICB9CgogIGZ1bmN0aW9uIHRhZyhub2RlKSB7CiAgICByZXR1cm4gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwogIH0KCiAgZnVuY3Rpb24gdGVzdFJlKHJlLCBsZXhlbWUpIHsKICAgIHZhciBtYXRjaCA9IHJlICYmIHJlLmV4ZWMobGV4ZW1lKTsKICAgIHJldHVybiBtYXRjaCAmJiBtYXRjaC5pbmRleCA9PT0gMDsKICB9CgogIGZ1bmN0aW9uIGlzTm90SGlnaGxpZ2h0ZWQobGFuZ3VhZ2UpIHsKICAgIHJldHVybiBub0hpZ2hsaWdodFJlLnRlc3QobGFuZ3VhZ2UpOwogIH0KCiAgZnVuY3Rpb24gYmxvY2tMYW5ndWFnZShibG9jaykgewogICAgdmFyIGksIG1hdGNoLCBsZW5ndGgsIF9jbGFzczsKCiAgICB2YXIgY2xhc3NlcyA9IGJsb2NrLmNsYXNzTmFtZSArICcgJzsKICAgIGNsYXNzZXMgKz0gYmxvY2sucGFyZW50Tm9kZSA/IGJsb2NrLnBhcmVudE5vZGUuY2xhc3NOYW1lIDogJyc7IC8vIGxhbmd1YWdlLSogdGFrZXMgcHJlY2VkZW5jZSBvdmVyIG5vbi1wcmVmaXhlZCBjbGFzcyBuYW1lcy4KCiAgICBtYXRjaCA9IGxhbmd1YWdlUHJlZml4UmUuZXhlYyhjbGFzc2VzKTsKCiAgICBpZiAobWF0Y2gpIHsKICAgICAgdmFyIGxhbmd1YWdlID0gZ2V0TGFuZ3VhZ2UobWF0Y2hbMV0pOwoKICAgICAgaWYgKCFsYW5ndWFnZSkgewogICAgICAgIGNvbnNvbGUud2FybihMQU5HVUFHRV9OT1RfRk9VTkQucmVwbGFjZSgie30iLCBtYXRjaFsxXSkpOwogICAgICAgIGNvbnNvbGUud2FybigiRmFsbGluZyBiYWNrIHRvIG5vLWhpZ2hsaWdodCBtb2RlIGZvciB0aGlzIGJsb2NrLiIsIGJsb2NrKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxhbmd1YWdlID8gbWF0Y2hbMV0gOiAnbm8taGlnaGxpZ2h0JzsKICAgIH0KCiAgICBjbGFzc2VzID0gY2xhc3Nlcy5zcGxpdCgvXHMrLyk7CgogICAgZm9yIChpID0gMCwgbGVuZ3RoID0gY2xhc3Nlcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBfY2xhc3MgPSBjbGFzc2VzW2ldOwoKICAgICAgaWYgKGlzTm90SGlnaGxpZ2h0ZWQoX2NsYXNzKSB8fCBnZXRMYW5ndWFnZShfY2xhc3MpKSB7CiAgICAgICAgcmV0dXJuIF9jbGFzczsKICAgICAgfQogICAgfQogIH0KICAvKioKICAgKiBwZXJmb3JtcyBhIHNoYWxsb3cgbWVyZ2Ugb2YgbXVsdGlwbGUgb2JqZWN0cyBpbnRvIG9uZQogICAqCiAgICogQGFyZ3VtZW50cyBsaXN0IG9mIG9iamVjdHMgd2l0aCBwcm9wZXJ0aWVzIHRvIG1lcmdlCiAgICogQHJldHVybnMgYSBzaW5nbGUgbmV3IG9iamVjdAogICAqLwoKCiAgZnVuY3Rpb24gaW5oZXJpdChwYXJlbnQpIHsKICAgIC8vIGluaGVyaXQocGFyZW50LCBvdmVycmlkZV9vYmosIG92ZXJyaWRlX29iaiwgLi4uKQogICAgdmFyIGtleTsKICAgIHZhciByZXN1bHQgPSB7fTsKICAgIHZhciBvYmplY3RzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKCiAgICBmb3IgKGtleSBpbiBwYXJlbnQpIHsKICAgICAgcmVzdWx0W2tleV0gPSBwYXJlbnRba2V5XTsKICAgIH0KCiAgICBvYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKG9iaikgewogICAgICBmb3IgKGtleSBpbiBvYmopIHsKICAgICAgICByZXN1bHRba2V5XSA9IG9ialtrZXldOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQogIC8qIFN0cmVhbSBtZXJnaW5nICovCgoKICBmdW5jdGlvbiBub2RlU3RyZWFtKG5vZGUpIHsKICAgIHZhciByZXN1bHQgPSBbXTsKCiAgICAoZnVuY3Rpb24gX25vZGVTdHJlYW0obm9kZSwgb2Zmc2V0KSB7CiAgICAgIGZvciAodmFyIGNoaWxkID0gbm9kZS5maXJzdENoaWxkOyBjaGlsZDsgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZykgewogICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PT0gMykgb2Zmc2V0ICs9IGNoaWxkLm5vZGVWYWx1ZS5sZW5ndGg7ZWxzZSBpZiAoY2hpbGQubm9kZVR5cGUgPT09IDEpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKHsKICAgICAgICAgICAgZXZlbnQ6ICdzdGFydCcsCiAgICAgICAgICAgIG9mZnNldDogb2Zmc2V0LAogICAgICAgICAgICBub2RlOiBjaGlsZAogICAgICAgICAgfSk7CiAgICAgICAgICBvZmZzZXQgPSBfbm9kZVN0cmVhbShjaGlsZCwgb2Zmc2V0KTsgLy8gUHJldmVudCB2b2lkIGVsZW1lbnRzIGZyb20gaGF2aW5nIGFuIGVuZCB0YWcgdGhhdCB3b3VsZCBhY3R1YWxseQogICAgICAgICAgLy8gZG91YmxlIHRoZW0gaW4gdGhlIG91dHB1dC4gVGhlcmUgYXJlIG1vcmUgdm9pZCBlbGVtZW50cyBpbiBIVE1MCiAgICAgICAgICAvLyBidXQgd2UgbGlzdCBvbmx5IHRob3NlIHJlYWxpc3RpY2FsbHkgZXhwZWN0ZWQgaW4gY29kZSBkaXNwbGF5LgoKICAgICAgICAgIGlmICghdGFnKGNoaWxkKS5tYXRjaCgvYnJ8aHJ8aW1nfGlucHV0LykpIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2goewogICAgICAgICAgICAgIGV2ZW50OiAnc3RvcCcsCiAgICAgICAgICAgICAgb2Zmc2V0OiBvZmZzZXQsCiAgICAgICAgICAgICAgbm9kZTogY2hpbGQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gb2Zmc2V0OwogICAgfSkobm9kZSwgMCk7CgogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIG1lcmdlU3RyZWFtcyhvcmlnaW5hbCwgaGlnaGxpZ2h0ZWQsIHZhbHVlKSB7CiAgICB2YXIgcHJvY2Vzc2VkID0gMDsKICAgIHZhciByZXN1bHQgPSAnJzsKICAgIHZhciBub2RlU3RhY2sgPSBbXTsKCiAgICBmdW5jdGlvbiBzZWxlY3RTdHJlYW0oKSB7CiAgICAgIGlmICghb3JpZ2luYWwubGVuZ3RoIHx8ICFoaWdobGlnaHRlZC5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gb3JpZ2luYWwubGVuZ3RoID8gb3JpZ2luYWwgOiBoaWdobGlnaHRlZDsKICAgICAgfQoKICAgICAgaWYgKG9yaWdpbmFsWzBdLm9mZnNldCAhPT0gaGlnaGxpZ2h0ZWRbMF0ub2Zmc2V0KSB7CiAgICAgICAgcmV0dXJuIG9yaWdpbmFsWzBdLm9mZnNldCA8IGhpZ2hsaWdodGVkWzBdLm9mZnNldCA/IG9yaWdpbmFsIDogaGlnaGxpZ2h0ZWQ7CiAgICAgIH0KICAgICAgLyoKICAgICAgVG8gYXZvaWQgc3RhcnRpbmcgdGhlIHN0cmVhbSBqdXN0IGJlZm9yZSBpdCBzaG91bGQgc3RvcCB0aGUgb3JkZXIgaXMKICAgICAgZW5zdXJlZCB0aGF0IG9yaWdpbmFsIGFsd2F5cyBzdGFydHMgZmlyc3QgYW5kIGNsb3NlcyBsYXN0OgogICAgICAgaWYgKGV2ZW50MSA9PSAnc3RhcnQnICYmIGV2ZW50MiA9PSAnc3RhcnQnKQogICAgICAgIHJldHVybiBvcmlnaW5hbDsKICAgICAgaWYgKGV2ZW50MSA9PSAnc3RhcnQnICYmIGV2ZW50MiA9PSAnc3RvcCcpCiAgICAgICAgcmV0dXJuIGhpZ2hsaWdodGVkOwogICAgICBpZiAoZXZlbnQxID09ICdzdG9wJyAmJiBldmVudDIgPT0gJ3N0YXJ0JykKICAgICAgICByZXR1cm4gb3JpZ2luYWw7CiAgICAgIGlmIChldmVudDEgPT0gJ3N0b3AnICYmIGV2ZW50MiA9PSAnc3RvcCcpCiAgICAgICAgcmV0dXJuIGhpZ2hsaWdodGVkOwogICAgICAgLi4uIHdoaWNoIGlzIGNvbGxhcHNlZCB0bzoKICAgICAgKi8KCgogICAgICByZXR1cm4gaGlnaGxpZ2h0ZWRbMF0uZXZlbnQgPT09ICdzdGFydCcgPyBvcmlnaW5hbCA6IGhpZ2hsaWdodGVkOwogICAgfQoKICAgIGZ1bmN0aW9uIG9wZW4obm9kZSkgewogICAgICBmdW5jdGlvbiBhdHRyX3N0cihhKSB7CiAgICAgICAgcmV0dXJuICcgJyArIGEubm9kZU5hbWUgKyAnPSInICsgZXNjYXBlKGEudmFsdWUpLnJlcGxhY2UoLyIvZywgJyZxdW90OycpICsgJyInOwogICAgICB9CgogICAgICByZXN1bHQgKz0gJzwnICsgdGFnKG5vZGUpICsgQXJyYXlQcm90by5tYXAuY2FsbChub2RlLmF0dHJpYnV0ZXMsIGF0dHJfc3RyKS5qb2luKCcnKSArICc+JzsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZShub2RlKSB7CiAgICAgIHJlc3VsdCArPSAnPC8nICsgdGFnKG5vZGUpICsgJz4nOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlcihldmVudCkgewogICAgICAoZXZlbnQuZXZlbnQgPT09ICdzdGFydCcgPyBvcGVuIDogY2xvc2UpKGV2ZW50Lm5vZGUpOwogICAgfQoKICAgIHdoaWxlIChvcmlnaW5hbC5sZW5ndGggfHwgaGlnaGxpZ2h0ZWQubGVuZ3RoKSB7CiAgICAgIHZhciBzdHJlYW0gPSBzZWxlY3RTdHJlYW0oKTsKICAgICAgcmVzdWx0ICs9IGVzY2FwZSh2YWx1ZS5zdWJzdHJpbmcocHJvY2Vzc2VkLCBzdHJlYW1bMF0ub2Zmc2V0KSk7CiAgICAgIHByb2Nlc3NlZCA9IHN0cmVhbVswXS5vZmZzZXQ7CgogICAgICBpZiAoc3RyZWFtID09PSBvcmlnaW5hbCkgewogICAgICAgIC8qCiAgICAgICAgT24gYW55IG9wZW5pbmcgb3IgY2xvc2luZyB0YWcgb2YgdGhlIG9yaWdpbmFsIG1hcmt1cCB3ZSBmaXJzdCBjbG9zZQogICAgICAgIHRoZSBlbnRpcmUgaGlnaGxpZ2h0ZWQgbm9kZSBzdGFjaywgdGhlbiByZW5kZXIgdGhlIG9yaWdpbmFsIHRhZyBhbG9uZwogICAgICAgIHdpdGggYWxsIHRoZSBmb2xsb3dpbmcgb3JpZ2luYWwgdGFncyBhdCB0aGUgc2FtZSBvZmZzZXQgYW5kIHRoZW4KICAgICAgICByZW9wZW4gYWxsIHRoZSB0YWdzIG9uIHRoZSBoaWdobGlnaHRlZCBzdGFjay4KICAgICAgICAqLwogICAgICAgIG5vZGVTdGFjay5yZXZlcnNlKCkuZm9yRWFjaChjbG9zZSk7CgogICAgICAgIGRvIHsKICAgICAgICAgIHJlbmRlcihzdHJlYW0uc3BsaWNlKDAsIDEpWzBdKTsKICAgICAgICAgIHN0cmVhbSA9IHNlbGVjdFN0cmVhbSgpOwogICAgICAgIH0gd2hpbGUgKHN0cmVhbSA9PT0gb3JpZ2luYWwgJiYgc3RyZWFtLmxlbmd0aCAmJiBzdHJlYW1bMF0ub2Zmc2V0ID09PSBwcm9jZXNzZWQpOwoKICAgICAgICBub2RlU3RhY2sucmV2ZXJzZSgpLmZvckVhY2gob3Blbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHN0cmVhbVswXS5ldmVudCA9PT0gJ3N0YXJ0JykgewogICAgICAgICAgbm9kZVN0YWNrLnB1c2goc3RyZWFtWzBdLm5vZGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub2RlU3RhY2sucG9wKCk7CiAgICAgICAgfQoKICAgICAgICByZW5kZXIoc3RyZWFtLnNwbGljZSgwLCAxKVswXSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcmVzdWx0ICsgZXNjYXBlKHZhbHVlLnN1YnN0cihwcm9jZXNzZWQpKTsKICB9CiAgLyogSW5pdGlhbGl6YXRpb24gKi8KCgogIGZ1bmN0aW9uIGRlcGVuZGVuY3lPblBhcmVudChtb2RlKSB7CiAgICBpZiAoIW1vZGUpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiBtb2RlLmVuZHNXaXRoUGFyZW50IHx8IGRlcGVuZGVuY3lPblBhcmVudChtb2RlLnN0YXJ0cyk7CiAgfQoKICBmdW5jdGlvbiBleHBhbmRfb3JfY2xvbmVfbW9kZShtb2RlKSB7CiAgICBpZiAobW9kZS52YXJpYW50cyAmJiAhbW9kZS5jYWNoZWRfdmFyaWFudHMpIHsKICAgICAgbW9kZS5jYWNoZWRfdmFyaWFudHMgPSBtb2RlLnZhcmlhbnRzLm1hcChmdW5jdGlvbiAodmFyaWFudCkgewogICAgICAgIHJldHVybiBpbmhlcml0KG1vZGUsIHsKICAgICAgICAgIHZhcmlhbnRzOiBudWxsCiAgICAgICAgfSwgdmFyaWFudCk7CiAgICAgIH0pOwogICAgfSAvLyBFWFBBTkQKICAgIC8vIGlmIHdlIGhhdmUgdmFyaWFudHMgdGhlbiBlc3NlbnRpYWxseSAicmVwbGFjZSIgdGhlIG1vZGUgd2l0aCB0aGUgdmFyaWFudHMKICAgIC8vIHRoaXMgaGFwcGVucyBpbiBjb21waWxlTW9kZSwgd2hlcmUgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZnJvbQoKCiAgICBpZiAobW9kZS5jYWNoZWRfdmFyaWFudHMpIHJldHVybiBtb2RlLmNhY2hlZF92YXJpYW50czsgLy8gQ0xPTkUKICAgIC8vIGlmIHdlIGhhdmUgZGVwZW5kZW5jaWVzIG9uIHBhcmVudHMgdGhlbiB3ZSBuZWVkIGEgdW5pcXVlCiAgICAvLyBpbnN0YW5jZSBvZiBvdXJzZWx2ZXMsIHNvIHdlIGNhbiBiZSByZXVzZWQgd2l0aCBtYW55CiAgICAvLyBkaWZmZXJlbnQgcGFyZW50cyB3aXRob3V0IGlzc3VlCgogICAgaWYgKGRlcGVuZGVuY3lPblBhcmVudChtb2RlKSkgcmV0dXJuIFtpbmhlcml0KG1vZGUsIHsKICAgICAgc3RhcnRzOiBtb2RlLnN0YXJ0cyA/IGluaGVyaXQobW9kZS5zdGFydHMpIDogbnVsbAogICAgfSldOwogICAgaWYgKE9iamVjdC5pc0Zyb3plbihtb2RlKSkgcmV0dXJuIFtpbmhlcml0KG1vZGUpXTsgLy8gbm8gc3BlY2lhbCBkZXBlbmRlbmN5IGlzc3VlcywganVzdCByZXR1cm4gb3Vyc2VsdmVzCgogICAgcmV0dXJuIFttb2RlXTsKICB9CgogIGZ1bmN0aW9uIHJlc3RvcmVMYW5ndWFnZUFwaShvYmopIHsKICAgIGlmIChBUElfUkVQTEFDRVMgJiYgIW9iai5sYW5nQXBpUmVzdG9yZWQpIHsKICAgICAgb2JqLmxhbmdBcGlSZXN0b3JlZCA9IHRydWU7CgogICAgICBmb3IgKHZhciBrZXkgaW4gQVBJX1JFUExBQ0VTKSB7CiAgICAgICAgaWYgKG9ialtrZXldKSB7CiAgICAgICAgICBvYmpbQVBJX1JFUExBQ0VTW2tleV1dID0gb2JqW2tleV07CiAgICAgICAgfQogICAgICB9CgogICAgICAob2JqLmNvbnRhaW5zIHx8IFtdKS5jb25jYXQob2JqLnZhcmlhbnRzIHx8IFtdKS5mb3JFYWNoKHJlc3RvcmVMYW5ndWFnZUFwaSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjb21waWxlS2V5d29yZHMocmF3S2V5d29yZHMsIGNhc2VfaW5zZW5zaXRpdmUpIHsKICAgIHZhciBjb21waWxlZF9rZXl3b3JkcyA9IHt9OwoKICAgIGlmICh0eXBlb2YgcmF3S2V5d29yZHMgPT09ICdzdHJpbmcnKSB7CiAgICAgIC8vIHN0cmluZwogICAgICBzcGxpdEFuZENvbXBpbGUoJ2tleXdvcmQnLCByYXdLZXl3b3Jkcyk7CiAgICB9IGVsc2UgewogICAgICBvYmplY3RLZXlzKHJhd0tleXdvcmRzKS5mb3JFYWNoKGZ1bmN0aW9uIChjbGFzc05hbWUpIHsKICAgICAgICBzcGxpdEFuZENvbXBpbGUoY2xhc3NOYW1lLCByYXdLZXl3b3Jkc1tjbGFzc05hbWVdKTsKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIGNvbXBpbGVkX2tleXdvcmRzOyAvLyAtLS0KCiAgICBmdW5jdGlvbiBzcGxpdEFuZENvbXBpbGUoY2xhc3NOYW1lLCBzdHIpIHsKICAgICAgaWYgKGNhc2VfaW5zZW5zaXRpdmUpIHsKICAgICAgICBzdHIgPSBzdHIudG9Mb3dlckNhc2UoKTsKICAgICAgfQoKICAgICAgc3RyLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbiAoa2V5d29yZCkgewogICAgICAgIHZhciBwYWlyID0ga2V5d29yZC5zcGxpdCgnfCcpOwogICAgICAgIGNvbXBpbGVkX2tleXdvcmRzW3BhaXJbMF1dID0gW2NsYXNzTmFtZSwgc2NvcmVGb3JLZXl3b3JkKHBhaXJbMF0sIHBhaXJbMV0pXTsKICAgICAgfSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzY29yZUZvcktleXdvcmQoa2V5d29yZCwgcHJvdmlkZWRTY29yZSkgewogICAgLy8gbWFudWFsIHNjb3JlcyBhbHdheXMgd2luIG92ZXIgY29tbW9uIGtleXdvcmRzCiAgICAvLyBzbyB5b3UgY2FuIGZvcmNlIGEgc2NvcmUgb2YgMSBpZiB5b3UgcmVhbGx5IGluc2lzdAogICAgaWYgKHByb3ZpZGVkU2NvcmUpIHJldHVybiBOdW1iZXIocHJvdmlkZWRTY29yZSk7CiAgICByZXR1cm4gY29tbW9uS2V5d29yZChrZXl3b3JkKSA/IDAgOiAxOwogIH0KCiAgZnVuY3Rpb24gY29tbW9uS2V5d29yZCh3b3JkKSB7CiAgICByZXR1cm4gQ09NTU9OX0tFWVdPUkRTLmluZGV4T2Yod29yZC50b0xvd2VyQ2FzZSgpKSAhPSAtMTsKICB9CgogIGZ1bmN0aW9uIGNvbXBpbGVMYW5ndWFnZShsYW5ndWFnZSkgewogICAgZnVuY3Rpb24gcmVTdHIocmUpIHsKICAgICAgcmV0dXJuIHJlICYmIHJlLnNvdXJjZSB8fCByZTsKICAgIH0KCiAgICBmdW5jdGlvbiBsYW5nUmUodmFsdWUsIGdsb2JhbCkgewogICAgICByZXR1cm4gbmV3IFJlZ0V4cChyZVN0cih2YWx1ZSksICdtJyArIChsYW5ndWFnZS5jYXNlX2luc2Vuc2l0aXZlID8gJ2knIDogJycpICsgKGdsb2JhbCA/ICdnJyA6ICcnKSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVDb3VudE1hdGNoR3JvdXBzKHJlKSB7CiAgICAgIHJldHVybiBuZXcgUmVnRXhwKHJlLnRvU3RyaW5nKCkgKyAnfCcpLmV4ZWMoJycpLmxlbmd0aCAtIDE7CiAgICB9IC8vIGpvaW5SZSBsb2dpY2FsbHkgY29tcHV0ZXMgcmVnZXhwcy5qb2luKHNlcGFyYXRvciksIGJ1dCBmaXhlcyB0aGUKICAgIC8vIGJhY2tyZWZlcmVuY2VzIHNvIHRoZXkgY29udGludWUgdG8gbWF0Y2guCiAgICAvLyBpdCBhbHNvIHBsYWNlcyBlYWNoIGluZGl2aWR1YWwgcmVndWxhciBleHByZXNzaW9uIGludG8gaXQncyBvd24KICAgIC8vIG1hdGNoIGdyb3VwLCBrZWVwaW5nIHRyYWNrIG9mIHRoZSBzZXF1ZW5jaW5nIG9mIHRob3NlIG1hdGNoIGdyb3VwcwogICAgLy8gaXMgY3VycmVudGx5IGFuIGV4ZXJjaXNlIGZvciB0aGUgY2FsbGVyLiA6LSkKCgogICAgZnVuY3Rpb24gam9pblJlKHJlZ2V4cHMsIHNlcGFyYXRvcikgewogICAgICAvLyBiYWNrcmVmZXJlbmNlUmUgbWF0Y2hlcyBhbiBvcGVuIHBhcmVudGhlc2lzIG9yIGJhY2tyZWZlcmVuY2UuIFRvIGF2b2lkCiAgICAgIC8vIGFuIGluY29ycmVjdCBwYXJzZSwgaXQgYWRkaXRpb25hbGx5IG1hdGNoZXMgdGhlIGZvbGxvd2luZzoKICAgICAgLy8gLSBbLi4uXSBlbGVtZW50cywgd2hlcmUgdGhlIG1lYW5pbmcgb2YgcGFyZW50aGVzZXMgYW5kIGVzY2FwZXMgY2hhbmdlCiAgICAgIC8vIC0gb3RoZXIgZXNjYXBlIHNlcXVlbmNlcywgc28gd2UgZG8gbm90IG1pc3BhcnNlIGVzY2FwZSBzZXF1ZW5jZXMgYXMKICAgICAgLy8gICBpbnRlcmVzdGluZyBlbGVtZW50cwogICAgICAvLyAtIG5vbi1tYXRjaGluZyBvciBsb29rYWhlYWQgcGFyZW50aGVzZXMsIHdoaWNoIGRvIG5vdCBjYXB0dXJlLiBUaGVzZQogICAgICAvLyAgIGZvbGxvdyB0aGUgJygnIHdpdGggYSAnPycuCiAgICAgIHZhciBiYWNrcmVmZXJlbmNlUmUgPSAvXFsoPzpbXlxcXF1dfFxcLikqXF18XChcPz98XFwoWzEtOV1bMC05XSopfFxcLi87CiAgICAgIHZhciBudW1DYXB0dXJlcyA9IDA7CiAgICAgIHZhciByZXQgPSAnJzsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVnZXhwcy5sZW5ndGg7IGkrKykgewogICAgICAgIG51bUNhcHR1cmVzICs9IDE7CiAgICAgICAgdmFyIG9mZnNldCA9IG51bUNhcHR1cmVzOwogICAgICAgIHZhciByZSA9IHJlU3RyKHJlZ2V4cHNbaV0pOwoKICAgICAgICBpZiAoaSA+IDApIHsKICAgICAgICAgIHJldCArPSBzZXBhcmF0b3I7CiAgICAgICAgfQoKICAgICAgICByZXQgKz0gIigiOwoKICAgICAgICB3aGlsZSAocmUubGVuZ3RoID4gMCkgewogICAgICAgICAgdmFyIG1hdGNoID0gYmFja3JlZmVyZW5jZVJlLmV4ZWMocmUpOwoKICAgICAgICAgIGlmIChtYXRjaCA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldCArPSByZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0ICs9IHJlLnN1YnN0cmluZygwLCBtYXRjaC5pbmRleCk7CiAgICAgICAgICByZSA9IHJlLnN1YnN0cmluZyhtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCk7CgogICAgICAgICAgaWYgKG1hdGNoWzBdWzBdID09ICdcXCcgJiYgbWF0Y2hbMV0pIHsKICAgICAgICAgICAgLy8gQWRqdXN0IHRoZSBiYWNrcmVmZXJlbmNlLgogICAgICAgICAgICByZXQgKz0gJ1xcJyArIFN0cmluZyhOdW1iZXIobWF0Y2hbMV0pICsgb2Zmc2V0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldCArPSBtYXRjaFswXTsKCiAgICAgICAgICAgIGlmIChtYXRjaFswXSA9PSAnKCcpIHsKICAgICAgICAgICAgICBudW1DYXB0dXJlcysrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXQgKz0gIikiOwogICAgICB9CgogICAgICByZXR1cm4gcmV0OwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1aWxkTW9kZVJlZ2V4KG1vZGUpIHsKICAgICAgdmFyIG1hdGNoSW5kZXhlcyA9IHt9OwogICAgICB2YXIgbWF0Y2hlclJlOwogICAgICB2YXIgcmVnZXhlcyA9IFtdOwogICAgICB2YXIgbWF0Y2hlciA9IHt9OwogICAgICB2YXIgbWF0Y2hBdCA9IDE7CgogICAgICBmdW5jdGlvbiBhZGRSdWxlKHJ1bGUsIHJlZ2V4KSB7CiAgICAgICAgbWF0Y2hJbmRleGVzW21hdGNoQXRdID0gcnVsZTsKICAgICAgICByZWdleGVzLnB1c2goW3J1bGUsIHJlZ2V4XSk7CiAgICAgICAgbWF0Y2hBdCArPSByZUNvdW50TWF0Y2hHcm91cHMocmVnZXgpICsgMTsKICAgICAgfQoKICAgICAgdmFyIHRlcm07CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGUuY29udGFpbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgcmU7CiAgICAgICAgdGVybSA9IG1vZGUuY29udGFpbnNbaV07CgogICAgICAgIGlmICh0ZXJtLmJlZ2luS2V5d29yZHMpIHsKICAgICAgICAgIHJlID0gJ1xcLj8oPzonICsgdGVybS5iZWdpbiArICcpXFwuPyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlID0gdGVybS5iZWdpbjsKICAgICAgICB9CgogICAgICAgIGFkZFJ1bGUodGVybSwgcmUpOwogICAgICB9CgogICAgICBpZiAobW9kZS50ZXJtaW5hdG9yX2VuZCkgYWRkUnVsZSgiZW5kIiwgbW9kZS50ZXJtaW5hdG9yX2VuZCk7CiAgICAgIGlmIChtb2RlLmlsbGVnYWwpIGFkZFJ1bGUoImlsbGVnYWwiLCBtb2RlLmlsbGVnYWwpOwogICAgICB2YXIgdGVybWluYXRvcnMgPSByZWdleGVzLm1hcChmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWxbMV07CiAgICAgIH0pOwogICAgICBtYXRjaGVyUmUgPSBsYW5nUmUoam9pblJlKHRlcm1pbmF0b3JzLCAnfCcpLCB0cnVlKTsKICAgICAgbWF0Y2hlci5sYXN0SW5kZXggPSAwOwoKICAgICAgbWF0Y2hlci5leGVjID0gZnVuY3Rpb24gKHMpIHsKICAgICAgICB2YXIgcnVsZTsKICAgICAgICBpZiAocmVnZXhlcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsOwogICAgICAgIG1hdGNoZXJSZS5sYXN0SW5kZXggPSBtYXRjaGVyLmxhc3RJbmRleDsKICAgICAgICB2YXIgbWF0Y2ggPSBtYXRjaGVyUmUuZXhlYyhzKTsKCiAgICAgICAgaWYgKCFtYXRjaCkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdGNoLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAobWF0Y2hbaV0gIT0gdW5kZWZpbmVkICYmIG1hdGNoSW5kZXhlc1siIiArIGldICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICBydWxlID0gbWF0Y2hJbmRleGVzWyIiICsgaV07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gaWxsZWdhbCBvciBlbmQgbWF0Y2gKCgogICAgICAgIGlmICh0eXBlb2YgcnVsZSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIG1hdGNoLnR5cGUgPSBydWxlOwogICAgICAgICAgbWF0Y2guZXh0cmEgPSBbbW9kZS5pbGxlZ2FsLCBtb2RlLnRlcm1pbmF0b3JfZW5kXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWF0Y2gudHlwZSA9ICJiZWdpbiI7CiAgICAgICAgICBtYXRjaC5ydWxlID0gcnVsZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBtYXRjaDsKICAgICAgfTsKCiAgICAgIHJldHVybiBtYXRjaGVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbXBpbGVNb2RlKG1vZGUsIHBhcmVudCkgewogICAgICBpZiAobW9kZS5jb21waWxlZCkgcmV0dXJuOwogICAgICBtb2RlLmNvbXBpbGVkID0gdHJ1ZTsKICAgICAgbW9kZS5rZXl3b3JkcyA9IG1vZGUua2V5d29yZHMgfHwgbW9kZS5iZWdpbktleXdvcmRzOwogICAgICBpZiAobW9kZS5rZXl3b3JkcykgbW9kZS5rZXl3b3JkcyA9IGNvbXBpbGVLZXl3b3Jkcyhtb2RlLmtleXdvcmRzLCBsYW5ndWFnZS5jYXNlX2luc2Vuc2l0aXZlKTsKICAgICAgbW9kZS5sZXhlbWVzUmUgPSBsYW5nUmUobW9kZS5sZXhlbWVzIHx8IC9cdysvLCB0cnVlKTsKCiAgICAgIGlmIChwYXJlbnQpIHsKICAgICAgICBpZiAobW9kZS5iZWdpbktleXdvcmRzKSB7CiAgICAgICAgICBtb2RlLmJlZ2luID0gJ1xcYignICsgbW9kZS5iZWdpbktleXdvcmRzLnNwbGl0KCcgJykuam9pbignfCcpICsgJylcXGInOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFtb2RlLmJlZ2luKSBtb2RlLmJlZ2luID0gL1xCfFxiLzsKICAgICAgICBtb2RlLmJlZ2luUmUgPSBsYW5nUmUobW9kZS5iZWdpbik7CiAgICAgICAgaWYgKG1vZGUuZW5kU2FtZUFzQmVnaW4pIG1vZGUuZW5kID0gbW9kZS5iZWdpbjsKICAgICAgICBpZiAoIW1vZGUuZW5kICYmICFtb2RlLmVuZHNXaXRoUGFyZW50KSBtb2RlLmVuZCA9IC9cQnxcYi87CiAgICAgICAgaWYgKG1vZGUuZW5kKSBtb2RlLmVuZFJlID0gbGFuZ1JlKG1vZGUuZW5kKTsKICAgICAgICBtb2RlLnRlcm1pbmF0b3JfZW5kID0gcmVTdHIobW9kZS5lbmQpIHx8ICcnOwogICAgICAgIGlmIChtb2RlLmVuZHNXaXRoUGFyZW50ICYmIHBhcmVudC50ZXJtaW5hdG9yX2VuZCkgbW9kZS50ZXJtaW5hdG9yX2VuZCArPSAobW9kZS5lbmQgPyAnfCcgOiAnJykgKyBwYXJlbnQudGVybWluYXRvcl9lbmQ7CiAgICAgIH0KCiAgICAgIGlmIChtb2RlLmlsbGVnYWwpIG1vZGUuaWxsZWdhbFJlID0gbGFuZ1JlKG1vZGUuaWxsZWdhbCk7CiAgICAgIGlmIChtb2RlLnJlbGV2YW5jZSA9PSBudWxsKSBtb2RlLnJlbGV2YW5jZSA9IDE7CgogICAgICBpZiAoIW1vZGUuY29udGFpbnMpIHsKICAgICAgICBtb2RlLmNvbnRhaW5zID0gW107CiAgICAgIH0KCiAgICAgIG1vZGUuY29udGFpbnMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBtb2RlLmNvbnRhaW5zLm1hcChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBleHBhbmRfb3JfY2xvbmVfbW9kZShjID09PSAnc2VsZicgPyBtb2RlIDogYyk7CiAgICAgIH0pKTsKICAgICAgbW9kZS5jb250YWlucy5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgY29tcGlsZU1vZGUoYywgbW9kZSk7CiAgICAgIH0pOwoKICAgICAgaWYgKG1vZGUuc3RhcnRzKSB7CiAgICAgICAgY29tcGlsZU1vZGUobW9kZS5zdGFydHMsIHBhcmVudCk7CiAgICAgIH0KCiAgICAgIG1vZGUudGVybWluYXRvcnMgPSBidWlsZE1vZGVSZWdleChtb2RlKTsKICAgIH0gLy8gc2VsZiBpcyBub3QgdmFsaWQgYXQgdGhlIHRvcC1sZXZlbAoKCiAgICBpZiAobGFuZ3VhZ2UuY29udGFpbnMgJiYgbGFuZ3VhZ2UuY29udGFpbnMuaW5kZXhPZignc2VsZicpICE9IC0xKSB7CiAgICAgIGlmICghU0FGRV9NT0RFKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJFUlI6IGNvbnRhaW5zIGBzZWxmYCBpcyBub3Qgc3VwcG9ydGVkIGF0IHRoZSB0b3AtbGV2ZWwgb2YgYSBsYW5ndWFnZS4gIFNlZSBkb2N1bWVudGF0aW9uLiIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHNpbGVudGx5IHJlbW92ZSB0aGUgYnJva2VuIHJ1bGUgKGVmZmVjdGl2ZWx5IGlnbm9yaW5nIGl0KSwgdGhpcyBoYXMgaGlzdG9yaWNhbGx5CiAgICAgICAgLy8gYmVlbiB0aGUgYmVoYXZpb3IgaW4gdGhlIHBhc3QsIHNvIHRoaXMgcmVtb3ZhbCBwcmVzZXJ2ZXMgY29tcGF0aWJpbGl0eSB3aXRoIGJyb2tlbgogICAgICAgIC8vIGdyYW1tYXJzIHdoZW4gcnVubmluZyBpbiBTYWZlIE1vZGUKICAgICAgICBsYW5ndWFnZS5jb250YWlucyA9IGxhbmd1YWdlLmNvbnRhaW5zLmZpbHRlcihmdW5jdGlvbiAobW9kZSkgewogICAgICAgICAgcmV0dXJuIG1vZGUgIT0gJ3NlbGYnOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgY29tcGlsZU1vZGUobGFuZ3VhZ2UpOwogIH0KCiAgZnVuY3Rpb24gaGlkZVVwZ3JhZGVXYXJuaW5nKCkgewogICAgaWYgKG9wdGlvbnMuaGlkZVVwZ3JhZGVXYXJuaW5nQWNjZXB0Tm9TdXBwb3J0T3JTZWN1cml0eVVwZGF0ZXMpIHJldHVybiB0cnVlOwogICAgaWYgKCh0eXBlb2YgcHJvY2VzcyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YocHJvY2VzcykpID09PSAib2JqZWN0IiAmJiBfdHlwZW9mKHByb2Nlc3MuZW52KSA9PT0gIm9iamVjdCIgJiYgcHJvY2Vzcy5lbnZbIkhMSlNfSElERV9VUEdSQURFX1dBUk5JTkciXSkgcmV0dXJuIHRydWU7CiAgfQogIC8qKgogICAqIENvcmUgaGlnaGxpZ2h0aW5nIGZ1bmN0aW9uLgogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlTmFtZSAtIHRoZSBsYW5ndWFnZSB0byB1c2UgZm9yIGhpZ2hsaWdodGluZwogICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIC0gdGhlIGNvZGUgdG8gaGlnaGxpZ2h0CiAgICogQHBhcmFtIHtib29sZWFufSBpZ25vcmVfaWxsZWdhbHMgLSB3aGV0aGVyIHRvIGlnbm9yZSBpbGxlZ2FsIG1hdGNoZXMsIGRlZmF1bHQgaXMgdG8gYmFpbAogICAqIEBwYXJhbSB7YXJyYXk8bW9kZT59IGNvbnRpbnVhdGlvbiAtIGFycmF5IG9mIGNvbnRpbnVhdGlvbiBtb2RlcwogICAqCiAgICogQHJldHVybnMgYW4gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgcmVzdWx0CiAgICogQHByb3BlcnR5IHtzdHJpbmd9IGxhbmd1YWdlIC0gdGhlIGxhbmd1YWdlIG5hbWUKICAgKiBAcHJvcGVydHkge251bWJlcn0gcmVsZXZhbmNlIC0gdGhlIHJlbGV2YW5jZSBzY29yZQogICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB2YWx1ZSAtIHRoZSBoaWdobGlnaHRlZCBIVE1MIGNvZGUKICAgKiBAcHJvcGVydHkge21vZGV9IHRvcCAtIHRvcCBvZiB0aGUgY3VycmVudCBtb2RlIHN0YWNrCiAgICogQHByb3BlcnR5IHtib29sZWFufSBpbGxlZ2FsIC0gaW5kaWNhdGVzIHdoZXRoZXIgYW55IGlsbGVnYWwgbWF0Y2hlcyB3ZXJlIGZvdW5kCiAgKi8KCgogIGZ1bmN0aW9uIGhpZ2hsaWdodChsYW5ndWFnZU5hbWUsIGNvZGUsIGlnbm9yZV9pbGxlZ2FscywgY29udGludWF0aW9uKSB7CiAgICBpZiAoIWhpZGVVcGdyYWRlV2FybmluZygpKSB7CiAgICAgIGlmICghc2hvd2VkVXBncmFkZVdhcm5pbmcpIHsKICAgICAgICBzaG93ZWRVcGdyYWRlV2FybmluZyA9IHRydWU7CiAgICAgICAgY29uc29sZS5sb2coIlZlcnNpb24gOSBvZiBIaWdobGlnaHQuanMgaGFzIHJlYWNoZWQgRU9MIGFuZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkLlxuIiArICJQbGVhc2UgdXBncmFkZSBvciBhc2sgd2hhdGV2ZXIgZGVwZW5kZW5jeSB5b3UgYXJlIHVzaW5nIHRvIHVwZ3JhZGUuXG4iICsgImh0dHBzOi8vZ2l0aHViLmNvbS9oaWdobGlnaHRqcy9oaWdobGlnaHQuanMvaXNzdWVzLzI4NzciKTsKICAgICAgfQogICAgfQoKICAgIHZhciBjb2RlVG9IaWdobGlnaHQgPSBjb2RlOwoKICAgIGZ1bmN0aW9uIGVzY2FwZVJlKHZhbHVlKSB7CiAgICAgIHJldHVybiBuZXcgUmVnRXhwKHZhbHVlLnJlcGxhY2UoL1stXC9cXF4kKis/LigpfFtcXXt9XS9nLCAnXFwkJicpLCAnbScpOwogICAgfQoKICAgIGZ1bmN0aW9uIGVuZE9mTW9kZShtb2RlLCBsZXhlbWUpIHsKICAgICAgaWYgKHRlc3RSZShtb2RlLmVuZFJlLCBsZXhlbWUpKSB7CiAgICAgICAgd2hpbGUgKG1vZGUuZW5kc1BhcmVudCAmJiBtb2RlLnBhcmVudCkgewogICAgICAgICAgbW9kZSA9IG1vZGUucGFyZW50OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG1vZGU7CiAgICAgIH0KCiAgICAgIGlmIChtb2RlLmVuZHNXaXRoUGFyZW50KSB7CiAgICAgICAgcmV0dXJuIGVuZE9mTW9kZShtb2RlLnBhcmVudCwgbGV4ZW1lKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGtleXdvcmRNYXRjaChtb2RlLCBtYXRjaCkgewogICAgICB2YXIgbWF0Y2hfc3RyID0gbGFuZ3VhZ2UuY2FzZV9pbnNlbnNpdGl2ZSA/IG1hdGNoWzBdLnRvTG93ZXJDYXNlKCkgOiBtYXRjaFswXTsKICAgICAgcmV0dXJuIG1vZGUua2V5d29yZHMuaGFzT3duUHJvcGVydHkobWF0Y2hfc3RyKSAmJiBtb2RlLmtleXdvcmRzW21hdGNoX3N0cl07CiAgICB9CgogICAgZnVuY3Rpb24gYnVpbGRTcGFuKGNsYXNzTmFtZSwgaW5zaWRlU3BhbiwgbGVhdmVPcGVuLCBub1ByZWZpeCkgewogICAgICBpZiAoIWxlYXZlT3BlbiAmJiBpbnNpZGVTcGFuID09PSAnJykgcmV0dXJuICcnOwogICAgICBpZiAoIWNsYXNzTmFtZSkgcmV0dXJuIGluc2lkZVNwYW47CiAgICAgIHZhciBjbGFzc1ByZWZpeCA9IG5vUHJlZml4ID8gJycgOiBvcHRpb25zLmNsYXNzUHJlZml4LAogICAgICAgICAgb3BlblNwYW4gPSAnPHNwYW4gY2xhc3M9IicgKyBjbGFzc1ByZWZpeCwKICAgICAgICAgIGNsb3NlU3BhbiA9IGxlYXZlT3BlbiA/ICcnIDogc3BhbkVuZFRhZzsKICAgICAgb3BlblNwYW4gKz0gY2xhc3NOYW1lICsgJyI+JzsKICAgICAgcmV0dXJuIG9wZW5TcGFuICsgaW5zaWRlU3BhbiArIGNsb3NlU3BhbjsKICAgIH0KCiAgICBmdW5jdGlvbiBwcm9jZXNzS2V5d29yZHMoKSB7CiAgICAgIHZhciBrZXl3b3JkX21hdGNoLCBsYXN0X2luZGV4LCBtYXRjaCwgcmVzdWx0OwogICAgICBpZiAoIXRvcC5rZXl3b3JkcykgcmV0dXJuIGVzY2FwZShtb2RlX2J1ZmZlcik7CiAgICAgIHJlc3VsdCA9ICcnOwogICAgICBsYXN0X2luZGV4ID0gMDsKICAgICAgdG9wLmxleGVtZXNSZS5sYXN0SW5kZXggPSAwOwogICAgICBtYXRjaCA9IHRvcC5sZXhlbWVzUmUuZXhlYyhtb2RlX2J1ZmZlcik7CgogICAgICB3aGlsZSAobWF0Y2gpIHsKICAgICAgICByZXN1bHQgKz0gZXNjYXBlKG1vZGVfYnVmZmVyLnN1YnN0cmluZyhsYXN0X2luZGV4LCBtYXRjaC5pbmRleCkpOwogICAgICAgIGtleXdvcmRfbWF0Y2ggPSBrZXl3b3JkTWF0Y2godG9wLCBtYXRjaCk7CgogICAgICAgIGlmIChrZXl3b3JkX21hdGNoKSB7CiAgICAgICAgICByZWxldmFuY2UgKz0ga2V5d29yZF9tYXRjaFsxXTsKICAgICAgICAgIHJlc3VsdCArPSBidWlsZFNwYW4oa2V5d29yZF9tYXRjaFswXSwgZXNjYXBlKG1hdGNoWzBdKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdCArPSBlc2NhcGUobWF0Y2hbMF0pOwogICAgICAgIH0KCiAgICAgICAgbGFzdF9pbmRleCA9IHRvcC5sZXhlbWVzUmUubGFzdEluZGV4OwogICAgICAgIG1hdGNoID0gdG9wLmxleGVtZXNSZS5leGVjKG1vZGVfYnVmZmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdCArIGVzY2FwZShtb2RlX2J1ZmZlci5zdWJzdHIobGFzdF9pbmRleCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHByb2Nlc3NTdWJMYW5ndWFnZSgpIHsKICAgICAgdmFyIGV4cGxpY2l0ID0gdHlwZW9mIHRvcC5zdWJMYW5ndWFnZSA9PT0gJ3N0cmluZyc7CgogICAgICBpZiAoZXhwbGljaXQgJiYgIWxhbmd1YWdlc1t0b3Auc3ViTGFuZ3VhZ2VdKSB7CiAgICAgICAgcmV0dXJuIGVzY2FwZShtb2RlX2J1ZmZlcik7CiAgICAgIH0KCiAgICAgIHZhciByZXN1bHQgPSBleHBsaWNpdCA/IGhpZ2hsaWdodCh0b3Auc3ViTGFuZ3VhZ2UsIG1vZGVfYnVmZmVyLCB0cnVlLCBjb250aW51YXRpb25zW3RvcC5zdWJMYW5ndWFnZV0pIDogaGlnaGxpZ2h0QXV0byhtb2RlX2J1ZmZlciwgdG9wLnN1Ykxhbmd1YWdlLmxlbmd0aCA/IHRvcC5zdWJMYW5ndWFnZSA6IHVuZGVmaW5lZCk7IC8vIENvdW50aW5nIGVtYmVkZGVkIGxhbmd1YWdlIHNjb3JlIHRvd2FyZHMgdGhlIGhvc3QgbGFuZ3VhZ2UgbWF5IGJlIGRpc2FibGVkCiAgICAgIC8vIHdpdGggemVyb2luZyB0aGUgY29udGFpbmluZyBtb2RlIHJlbGV2YW5jZS4gVXNlIGNhc2UgaW4gcG9pbnQgaXMgTWFya2Rvd24gdGhhdAogICAgICAvLyBhbGxvd3MgWE1MIGV2ZXJ5d2hlcmUgYW5kIG1ha2VzIGV2ZXJ5IFhNTCBzbmlwcGV0IHRvIGhhdmUgYSBtdWNoIGxhcmdlciBNYXJrZG93bgogICAgICAvLyBzY29yZS4KCiAgICAgIGlmICh0b3AucmVsZXZhbmNlID4gMCkgewogICAgICAgIHJlbGV2YW5jZSArPSByZXN1bHQucmVsZXZhbmNlOwogICAgICB9CgogICAgICBpZiAoZXhwbGljaXQpIHsKICAgICAgICBjb250aW51YXRpb25zW3RvcC5zdWJMYW5ndWFnZV0gPSByZXN1bHQudG9wOwogICAgICB9CgogICAgICByZXR1cm4gYnVpbGRTcGFuKHJlc3VsdC5sYW5ndWFnZSwgcmVzdWx0LnZhbHVlLCBmYWxzZSwgdHJ1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJvY2Vzc0J1ZmZlcigpIHsKICAgICAgcmVzdWx0ICs9IHRvcC5zdWJMYW5ndWFnZSAhPSBudWxsID8gcHJvY2Vzc1N1Ykxhbmd1YWdlKCkgOiBwcm9jZXNzS2V5d29yZHMoKTsKICAgICAgbW9kZV9idWZmZXIgPSAnJzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdGFydE5ld01vZGUobW9kZSkgewogICAgICByZXN1bHQgKz0gbW9kZS5jbGFzc05hbWUgPyBidWlsZFNwYW4obW9kZS5jbGFzc05hbWUsICcnLCB0cnVlKSA6ICcnOwogICAgICB0b3AgPSBPYmplY3QuY3JlYXRlKG1vZGUsIHsKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIHZhbHVlOiB0b3AKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvQmVnaW5NYXRjaChtYXRjaCkgewogICAgICB2YXIgbGV4ZW1lID0gbWF0Y2hbMF07CiAgICAgIHZhciBuZXdfbW9kZSA9IG1hdGNoLnJ1bGU7CgogICAgICBpZiAobmV3X21vZGUgJiYgbmV3X21vZGUuZW5kU2FtZUFzQmVnaW4pIHsKICAgICAgICBuZXdfbW9kZS5lbmRSZSA9IGVzY2FwZVJlKGxleGVtZSk7CiAgICAgIH0KCiAgICAgIGlmIChuZXdfbW9kZS5za2lwKSB7CiAgICAgICAgbW9kZV9idWZmZXIgKz0gbGV4ZW1lOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChuZXdfbW9kZS5leGNsdWRlQmVnaW4pIHsKICAgICAgICAgIG1vZGVfYnVmZmVyICs9IGxleGVtZTsKICAgICAgICB9CgogICAgICAgIHByb2Nlc3NCdWZmZXIoKTsKCiAgICAgICAgaWYgKCFuZXdfbW9kZS5yZXR1cm5CZWdpbiAmJiAhbmV3X21vZGUuZXhjbHVkZUJlZ2luKSB7CiAgICAgICAgICBtb2RlX2J1ZmZlciA9IGxleGVtZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHN0YXJ0TmV3TW9kZShuZXdfbW9kZSk7CiAgICAgIHJldHVybiBuZXdfbW9kZS5yZXR1cm5CZWdpbiA/IDAgOiBsZXhlbWUubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvRW5kTWF0Y2gobWF0Y2gpIHsKICAgICAgdmFyIGxleGVtZSA9IG1hdGNoWzBdOwogICAgICB2YXIgbWF0Y2hQbHVzUmVtYWluZGVyID0gY29kZVRvSGlnaGxpZ2h0LnN1YnN0cihtYXRjaC5pbmRleCk7CiAgICAgIHZhciBlbmRfbW9kZSA9IGVuZE9mTW9kZSh0b3AsIG1hdGNoUGx1c1JlbWFpbmRlcik7CgogICAgICBpZiAoIWVuZF9tb2RlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgb3JpZ2luID0gdG9wOwoKICAgICAgaWYgKG9yaWdpbi5za2lwKSB7CiAgICAgICAgbW9kZV9idWZmZXIgKz0gbGV4ZW1lOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghKG9yaWdpbi5yZXR1cm5FbmQgfHwgb3JpZ2luLmV4Y2x1ZGVFbmQpKSB7CiAgICAgICAgICBtb2RlX2J1ZmZlciArPSBsZXhlbWU7CiAgICAgICAgfQoKICAgICAgICBwcm9jZXNzQnVmZmVyKCk7CgogICAgICAgIGlmIChvcmlnaW4uZXhjbHVkZUVuZCkgewogICAgICAgICAgbW9kZV9idWZmZXIgPSBsZXhlbWU7CiAgICAgICAgfQogICAgICB9CgogICAgICBkbyB7CiAgICAgICAgaWYgKHRvcC5jbGFzc05hbWUpIHsKICAgICAgICAgIHJlc3VsdCArPSBzcGFuRW5kVGFnOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF0b3Auc2tpcCAmJiAhdG9wLnN1Ykxhbmd1YWdlKSB7CiAgICAgICAgICByZWxldmFuY2UgKz0gdG9wLnJlbGV2YW5jZTsKICAgICAgICB9CgogICAgICAgIHRvcCA9IHRvcC5wYXJlbnQ7CiAgICAgIH0gd2hpbGUgKHRvcCAhPT0gZW5kX21vZGUucGFyZW50KTsKCiAgICAgIGlmIChlbmRfbW9kZS5zdGFydHMpIHsKICAgICAgICBpZiAoZW5kX21vZGUuZW5kU2FtZUFzQmVnaW4pIHsKICAgICAgICAgIGVuZF9tb2RlLnN0YXJ0cy5lbmRSZSA9IGVuZF9tb2RlLmVuZFJlOwogICAgICAgIH0KCiAgICAgICAgc3RhcnROZXdNb2RlKGVuZF9tb2RlLnN0YXJ0cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvcmlnaW4ucmV0dXJuRW5kID8gMCA6IGxleGVtZS5sZW5ndGg7CiAgICB9CgogICAgdmFyIGxhc3RNYXRjaCA9IHt9OwoKICAgIGZ1bmN0aW9uIHByb2Nlc3NMZXhlbWUodGV4dF9iZWZvcmVfbWF0Y2gsIG1hdGNoKSB7CiAgICAgIHZhciBsZXhlbWUgPSBtYXRjaCAmJiBtYXRjaFswXTsgLy8gYWRkIG5vbi1tYXRjaGVkIHRleHQgdG8gdGhlIGN1cnJlbnQgbW9kZSBidWZmZXIKCiAgICAgIG1vZGVfYnVmZmVyICs9IHRleHRfYmVmb3JlX21hdGNoOwoKICAgICAgaWYgKGxleGVtZSA9PSBudWxsKSB7CiAgICAgICAgcHJvY2Vzc0J1ZmZlcigpOwogICAgICAgIHJldHVybiAwOwogICAgICB9IC8vIHdlJ3ZlIGZvdW5kIGEgMCB3aWR0aCBtYXRjaCBhbmQgd2UncmUgc3R1Y2ssIHNvIHdlIG5lZWQgdG8gYWR2YW5jZQogICAgICAvLyB0aGlzIGhhcHBlbnMgd2hlbiB3ZSBoYXZlIGJhZGx5IGJlaGF2ZWQgcnVsZXMgdGhhdCBoYXZlIG9wdGlvbmFsIG1hdGNoZXJzIHRvIHRoZSBkZWdyZWUgdGhhdAogICAgICAvLyBzb21ldGltZXMgdGhleSBjYW4gZW5kIHVwIG1hdGNoaW5nIG5vdGhpbmcgYXQgYWxsCiAgICAgIC8vIFJlZjogaHR0cHM6Ly9naXRodWIuY29tL2hpZ2hsaWdodGpzL2hpZ2hsaWdodC5qcy9pc3N1ZXMvMjE0MAoKCiAgICAgIGlmIChsYXN0TWF0Y2gudHlwZSA9PSAiYmVnaW4iICYmIG1hdGNoLnR5cGUgPT0gImVuZCIgJiYgbGFzdE1hdGNoLmluZGV4ID09IG1hdGNoLmluZGV4ICYmIGxleGVtZSA9PT0gIiIpIHsKICAgICAgICAvLyBzcGl0IHRoZSAic2tpcHBlZCIgY2hhcmFjdGVyIHRoYXQgb3VyIHJlZ2V4IGNob2tlZCBvbiBiYWNrIGludG8gdGhlIG91dHB1dCBzZXF1ZW5jZQogICAgICAgIG1vZGVfYnVmZmVyICs9IGNvZGVUb0hpZ2hsaWdodC5zbGljZShtYXRjaC5pbmRleCwgbWF0Y2guaW5kZXggKyAxKTsKICAgICAgICByZXR1cm4gMTsKICAgICAgfSAvLyBlZGdlIGNhc2UgZm9yIHdoZW4gaWxsZWdhbCBtYXRjaGVzICQgKGVuZCBvZiBsaW5lKSB3aGljaCBpcyB0ZWNobmljYWxseQogICAgICAvLyBhIDAgd2lkdGggbWF0Y2ggYnV0IG5vdCBhIGJlZ2luL2VuZCBtYXRjaCBzbyBpdCdzIG5vdCBjYXVnaHQgYnkgdGhlCiAgICAgIC8vIGZpcnN0IGhhbmRsZXIgKHdoZW4gaWdub3JlSWxsZWdhbHMgaXMgdHJ1ZSkKICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2hpZ2hsaWdodGpzL2hpZ2hsaWdodC5qcy9pc3N1ZXMvMjUyMgoKCiAgICAgIGlmIChsYXN0TWF0Y2gudHlwZSA9PT0gImlsbGVnYWwiICYmIGxleGVtZSA9PT0gIiIpIHsKICAgICAgICBtb2RlX2J1ZmZlciArPSBjb2RlVG9IaWdobGlnaHQuc2xpY2UobWF0Y2guaW5kZXgsIG1hdGNoLmluZGV4ICsgMSk7CiAgICAgICAgcmV0dXJuIDE7CiAgICAgIH0KCiAgICAgIGxhc3RNYXRjaCA9IG1hdGNoOwoKICAgICAgaWYgKG1hdGNoLnR5cGUgPT09ICJiZWdpbiIpIHsKICAgICAgICByZXR1cm4gZG9CZWdpbk1hdGNoKG1hdGNoKTsKICAgICAgfSBlbHNlIGlmIChtYXRjaC50eXBlID09PSAiaWxsZWdhbCIgJiYgIWlnbm9yZV9pbGxlZ2FscykgewogICAgICAgIC8vIGlsbGVnYWwgbWF0Y2gsIHdlIGRvIG5vdCBjb250aW51ZSBwcm9jZXNzaW5nCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbGxlZ2FsIGxleGVtZSAiJyArIGxleGVtZSArICciIGZvciBtb2RlICInICsgKHRvcC5jbGFzc05hbWUgfHwgJzx1bm5hbWVkPicpICsgJyInKTsKICAgICAgfSBlbHNlIGlmIChtYXRjaC50eXBlID09PSAiZW5kIikgewogICAgICAgIHZhciBwcm9jZXNzZWQgPSBkb0VuZE1hdGNoKG1hdGNoKTsKICAgICAgICBpZiAocHJvY2Vzc2VkICE9IHVuZGVmaW5lZCkgcmV0dXJuIHByb2Nlc3NlZDsKICAgICAgfQogICAgICAvKgogICAgICBXaHkgbWlnaHQgYmUgZmluZCBvdXJzZWx2ZXMgaGVyZT8gIE9ubHkgb25lIG9jY2FzaW9uIG5vdy4gIEFuIGVuZCBtYXRjaCB0aGF0IHdhcwogICAgICB0cmlnZ2VyZWQgYnV0IGNvdWxkIG5vdCBiZSBjb21wbGV0ZWQuICBXaGVuIG1pZ2h0IHRoaXMgaGFwcGVuPyAgV2hlbiBhbiBgZW5kU2FtZWFzQmVnaW5gCiAgICAgIHJ1bGUgc2V0cyB0aGUgZW5kIHJ1bGUgdG8gYSBzcGVjaWZpYyBtYXRjaC4gIFNpbmNlIHRoZSBvdmVyYWxsIG1vZGUgdGVybWluYXRpb24gcnVsZSB0aGF0J3MKICAgICAgYmVpbmcgdXNlZCB0byBzY2FuIHRoZSB0ZXh0IGlzbid0IHJlY29tcGlsZWQgdGhhdCBtZWFucyB0aGF0IGFueSBtYXRjaCB0aGF0IExPT0tTIGxpa2UKICAgICAgdGhlIGVuZCAoYnV0IGlzIG5vdCwgYmVjYXVzZSBpdCBpcyBub3QgYW4gZXhhY3QgbWF0Y2ggdG8gdGhlIGJlZ2lubmluZykgd2lsbAogICAgICBlbmQgdXAgaGVyZS4gIEEgZGVmaW5pdGUgZW5kIG1hdGNoLCBidXQgd2hlbiBgZG9FbmRNYXRjaGAgdHJpZXMgdG8gInJlYXBwbHkiCiAgICAgIHRoZSBlbmQgcnVsZSBhbmQgZmFpbHMgdG8gbWF0Y2gsIHdlIHdpbmQgdXAgaGVyZSwgYW5kIGp1c3Qgc2lsZW50bHkgaWdub3JlIHRoZSBlbmQuCiAgICAgICBUaGlzIGNhdXNlcyBubyByZWFsIGhhcm0gb3RoZXIgdGhhbiBzdG9wcGluZyBhIGZldyB0aW1lcyB0b28gbWFueS4KICAgICAgKi8KCgogICAgICBtb2RlX2J1ZmZlciArPSBsZXhlbWU7CiAgICAgIHJldHVybiBsZXhlbWUubGVuZ3RoOwogICAgfQoKICAgIHZhciBsYW5ndWFnZSA9IGdldExhbmd1YWdlKGxhbmd1YWdlTmFtZSk7CgogICAgaWYgKCFsYW5ndWFnZSkgewogICAgICBjb25zb2xlLmVycm9yKExBTkdVQUdFX05PVF9GT1VORC5yZXBsYWNlKCJ7fSIsIGxhbmd1YWdlTmFtZSkpOwogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbGFuZ3VhZ2U6ICInICsgbGFuZ3VhZ2VOYW1lICsgJyInKTsKICAgIH0KCiAgICBjb21waWxlTGFuZ3VhZ2UobGFuZ3VhZ2UpOwogICAgdmFyIHRvcCA9IGNvbnRpbnVhdGlvbiB8fCBsYW5ndWFnZTsKICAgIHZhciBjb250aW51YXRpb25zID0ge307IC8vIGtlZXAgY29udGludWF0aW9ucyBmb3Igc3ViLWxhbmd1YWdlcwoKICAgIHZhciByZXN1bHQgPSAnJywKICAgICAgICBjdXJyZW50OwoKICAgIGZvciAoY3VycmVudCA9IHRvcDsgY3VycmVudCAhPT0gbGFuZ3VhZ2U7IGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudCkgewogICAgICBpZiAoY3VycmVudC5jbGFzc05hbWUpIHsKICAgICAgICByZXN1bHQgPSBidWlsZFNwYW4oY3VycmVudC5jbGFzc05hbWUsICcnLCB0cnVlKSArIHJlc3VsdDsKICAgICAgfQogICAgfQoKICAgIHZhciBtb2RlX2J1ZmZlciA9ICcnOwogICAgdmFyIHJlbGV2YW5jZSA9IDA7CgogICAgdHJ5IHsKICAgICAgdmFyIG1hdGNoLAogICAgICAgICAgY291bnQsCiAgICAgICAgICBpbmRleCA9IDA7CgogICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgIHRvcC50ZXJtaW5hdG9ycy5sYXN0SW5kZXggPSBpbmRleDsKICAgICAgICBtYXRjaCA9IHRvcC50ZXJtaW5hdG9ycy5leGVjKGNvZGVUb0hpZ2hsaWdodCk7CiAgICAgICAgaWYgKCFtYXRjaCkgYnJlYWs7CiAgICAgICAgY291bnQgPSBwcm9jZXNzTGV4ZW1lKGNvZGVUb0hpZ2hsaWdodC5zdWJzdHJpbmcoaW5kZXgsIG1hdGNoLmluZGV4KSwgbWF0Y2gpOwogICAgICAgIGluZGV4ID0gbWF0Y2guaW5kZXggKyBjb3VudDsKICAgICAgfQoKICAgICAgcHJvY2Vzc0xleGVtZShjb2RlVG9IaWdobGlnaHQuc3Vic3RyKGluZGV4KSk7CgogICAgICBmb3IgKGN1cnJlbnQgPSB0b3A7IGN1cnJlbnQucGFyZW50OyBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQpIHsKICAgICAgICAvLyBjbG9zZSBkYW5nbGluZyBtb2RlcwogICAgICAgIGlmIChjdXJyZW50LmNsYXNzTmFtZSkgewogICAgICAgICAgcmVzdWx0ICs9IHNwYW5FbmRUYWc7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIHJlbGV2YW5jZTogcmVsZXZhbmNlLAogICAgICAgIHZhbHVlOiByZXN1bHQsCiAgICAgICAgaWxsZWdhbDogZmFsc2UsCiAgICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlTmFtZSwKICAgICAgICB0b3A6IHRvcAogICAgICB9OwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIGlmIChlcnIubWVzc2FnZSAmJiBlcnIubWVzc2FnZS5pbmRleE9mKCdJbGxlZ2FsJykgIT09IC0xKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlsbGVnYWw6IHRydWUsCiAgICAgICAgICByZWxldmFuY2U6IDAsCiAgICAgICAgICB2YWx1ZTogZXNjYXBlKGNvZGVUb0hpZ2hsaWdodCkKICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKFNBRkVfTU9ERSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICByZWxldmFuY2U6IDAsCiAgICAgICAgICB2YWx1ZTogZXNjYXBlKGNvZGVUb0hpZ2hsaWdodCksCiAgICAgICAgICBsYW5ndWFnZTogbGFuZ3VhZ2VOYW1lLAogICAgICAgICAgdG9wOiB0b3AsCiAgICAgICAgICBlcnJvclJhaXNlZDogZXJyCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBlcnI7CiAgICAgIH0KICAgIH0KICB9CiAgLyoKICBIaWdobGlnaHRpbmcgd2l0aCBsYW5ndWFnZSBkZXRlY3Rpb24uIEFjY2VwdHMgYSBzdHJpbmcgd2l0aCB0aGUgY29kZSB0bwogIGhpZ2hsaWdodC4gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6CiAgIC0gbGFuZ3VhZ2UgKGRldGVjdGVkIGxhbmd1YWdlKQogIC0gcmVsZXZhbmNlIChpbnQpCiAgLSB2YWx1ZSAoYW4gSFRNTCBzdHJpbmcgd2l0aCBoaWdobGlnaHRpbmcgbWFya3VwKQogIC0gc2Vjb25kX2Jlc3QgKG9iamVjdCB3aXRoIHRoZSBzYW1lIHN0cnVjdHVyZSBmb3Igc2Vjb25kLWJlc3QgaGV1cmlzdGljYWxseQogICAgZGV0ZWN0ZWQgbGFuZ3VhZ2UsIG1heSBiZSBhYnNlbnQpCiAgICovCgoKICBmdW5jdGlvbiBoaWdobGlnaHRBdXRvKGNvZGUsIGxhbmd1YWdlU3Vic2V0KSB7CiAgICBsYW5ndWFnZVN1YnNldCA9IGxhbmd1YWdlU3Vic2V0IHx8IG9wdGlvbnMubGFuZ3VhZ2VzIHx8IG9iamVjdEtleXMobGFuZ3VhZ2VzKTsKICAgIHZhciByZXN1bHQgPSB7CiAgICAgIHJlbGV2YW5jZTogMCwKICAgICAgdmFsdWU6IGVzY2FwZShjb2RlKQogICAgfTsKICAgIHZhciBzZWNvbmRfYmVzdCA9IHJlc3VsdDsKICAgIGxhbmd1YWdlU3Vic2V0LmZpbHRlcihnZXRMYW5ndWFnZSkuZmlsdGVyKGF1dG9EZXRlY3Rpb24pLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdmFyIGN1cnJlbnQgPSBoaWdobGlnaHQobmFtZSwgY29kZSwgZmFsc2UpOwogICAgICBjdXJyZW50Lmxhbmd1YWdlID0gbmFtZTsKCiAgICAgIGlmIChjdXJyZW50LnJlbGV2YW5jZSA+IHNlY29uZF9iZXN0LnJlbGV2YW5jZSkgewogICAgICAgIHNlY29uZF9iZXN0ID0gY3VycmVudDsKICAgICAgfQoKICAgICAgaWYgKGN1cnJlbnQucmVsZXZhbmNlID4gcmVzdWx0LnJlbGV2YW5jZSkgewogICAgICAgIHNlY29uZF9iZXN0ID0gcmVzdWx0OwogICAgICAgIHJlc3VsdCA9IGN1cnJlbnQ7CiAgICAgIH0KICAgIH0pOwoKICAgIGlmIChzZWNvbmRfYmVzdC5sYW5ndWFnZSkgewogICAgICByZXN1bHQuc2Vjb25kX2Jlc3QgPSBzZWNvbmRfYmVzdDsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH0KICAvKgogIFBvc3QtcHJvY2Vzc2luZyBvZiB0aGUgaGlnaGxpZ2h0ZWQgbWFya3VwOgogICAtIHJlcGxhY2UgVEFCcyB3aXRoIHNvbWV0aGluZyBtb3JlIHVzZWZ1bAogIC0gcmVwbGFjZSByZWFsIGxpbmUtYnJlYWtzIHdpdGggJzxicj4nIGZvciBub24tcHJlIGNvbnRhaW5lcnMKICAgKi8KCgogIGZ1bmN0aW9uIGZpeE1hcmt1cCh2YWx1ZSkgewogICAgaWYgKCEob3B0aW9ucy50YWJSZXBsYWNlIHx8IG9wdGlvbnMudXNlQlIpKSB7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KCiAgICByZXR1cm4gdmFsdWUucmVwbGFjZShmaXhNYXJrdXBSZSwgZnVuY3Rpb24gKG1hdGNoLCBwMSkgewogICAgICBpZiAob3B0aW9ucy51c2VCUiAmJiBtYXRjaCA9PT0gJ1xuJykgewogICAgICAgIHJldHVybiAnPGJyPic7CiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy50YWJSZXBsYWNlKSB7CiAgICAgICAgcmV0dXJuIHAxLnJlcGxhY2UoL1x0L2csIG9wdGlvbnMudGFiUmVwbGFjZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiAnJzsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gYnVpbGRDbGFzc05hbWUocHJldkNsYXNzTmFtZSwgY3VycmVudExhbmcsIHJlc3VsdExhbmcpIHsKICAgIHZhciBsYW5ndWFnZSA9IGN1cnJlbnRMYW5nID8gYWxpYXNlc1tjdXJyZW50TGFuZ10gOiByZXN1bHRMYW5nLAogICAgICAgIHJlc3VsdCA9IFtwcmV2Q2xhc3NOYW1lLnRyaW0oKV07CgogICAgaWYgKCFwcmV2Q2xhc3NOYW1lLm1hdGNoKC9cYmhsanNcYi8pKSB7CiAgICAgIHJlc3VsdC5wdXNoKCdobGpzJyk7CiAgICB9CgogICAgaWYgKHByZXZDbGFzc05hbWUuaW5kZXhPZihsYW5ndWFnZSkgPT09IC0xKSB7CiAgICAgIHJlc3VsdC5wdXNoKGxhbmd1YWdlKTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJyAnKS50cmltKCk7CiAgfQogIC8qCiAgQXBwbGllcyBoaWdobGlnaHRpbmcgdG8gYSBET00gbm9kZSBjb250YWluaW5nIGNvZGUuIEFjY2VwdHMgYSBET00gbm9kZSBhbmQKICB0d28gb3B0aW9uYWwgcGFyYW1ldGVycyBmb3IgZml4TWFya3VwLgogICovCgoKICBmdW5jdGlvbiBoaWdobGlnaHRCbG9jayhibG9jaykgewogICAgdmFyIG5vZGUsIG9yaWdpbmFsU3RyZWFtLCByZXN1bHQsIHJlc3VsdE5vZGUsIHRleHQ7CiAgICB2YXIgbGFuZ3VhZ2UgPSBibG9ja0xhbmd1YWdlKGJsb2NrKTsKICAgIGlmIChpc05vdEhpZ2hsaWdodGVkKGxhbmd1YWdlKSkgcmV0dXJuOwoKICAgIGlmIChvcHRpb25zLnVzZUJSKSB7CiAgICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgbm9kZS5pbm5lckhUTUwgPSBibG9jay5pbm5lckhUTUwucmVwbGFjZSgvXG4vZywgJycpLnJlcGxhY2UoLzxiclsgXC9dKj4vZywgJ1xuJyk7CiAgICB9IGVsc2UgewogICAgICBub2RlID0gYmxvY2s7CiAgICB9CgogICAgdGV4dCA9IG5vZGUudGV4dENvbnRlbnQ7CiAgICByZXN1bHQgPSBsYW5ndWFnZSA/IGhpZ2hsaWdodChsYW5ndWFnZSwgdGV4dCwgdHJ1ZSkgOiBoaWdobGlnaHRBdXRvKHRleHQpOwogICAgb3JpZ2luYWxTdHJlYW0gPSBub2RlU3RyZWFtKG5vZGUpOwoKICAgIGlmIChvcmlnaW5hbFN0cmVhbS5sZW5ndGgpIHsKICAgICAgcmVzdWx0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICByZXN1bHROb2RlLmlubmVySFRNTCA9IHJlc3VsdC52YWx1ZTsKICAgICAgcmVzdWx0LnZhbHVlID0gbWVyZ2VTdHJlYW1zKG9yaWdpbmFsU3RyZWFtLCBub2RlU3RyZWFtKHJlc3VsdE5vZGUpLCB0ZXh0KTsKICAgIH0KCiAgICByZXN1bHQudmFsdWUgPSBmaXhNYXJrdXAocmVzdWx0LnZhbHVlKTsKICAgIGJsb2NrLmlubmVySFRNTCA9IHJlc3VsdC52YWx1ZTsKICAgIGJsb2NrLmNsYXNzTmFtZSA9IGJ1aWxkQ2xhc3NOYW1lKGJsb2NrLmNsYXNzTmFtZSwgbGFuZ3VhZ2UsIHJlc3VsdC5sYW5ndWFnZSk7CiAgICBibG9jay5yZXN1bHQgPSB7CiAgICAgIGxhbmd1YWdlOiByZXN1bHQubGFuZ3VhZ2UsCiAgICAgIHJlOiByZXN1bHQucmVsZXZhbmNlCiAgICB9OwoKICAgIGlmIChyZXN1bHQuc2Vjb25kX2Jlc3QpIHsKICAgICAgYmxvY2suc2Vjb25kX2Jlc3QgPSB7CiAgICAgICAgbGFuZ3VhZ2U6IHJlc3VsdC5zZWNvbmRfYmVzdC5sYW5ndWFnZSwKICAgICAgICByZTogcmVzdWx0LnNlY29uZF9iZXN0LnJlbGV2YW5jZQogICAgICB9OwogICAgfQogIH0KICAvKgogIFVwZGF0ZXMgaGlnaGxpZ2h0LmpzIGdsb2JhbCBvcHRpb25zIHdpdGggdmFsdWVzIHBhc3NlZCBpbiB0aGUgZm9ybSBvZiBhbiBvYmplY3QuCiAgKi8KCgogIGZ1bmN0aW9uIGNvbmZpZ3VyZSh1c2VyX29wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBpbmhlcml0KG9wdGlvbnMsIHVzZXJfb3B0aW9ucyk7CiAgfQogIC8qCiAgQXBwbGllcyBoaWdobGlnaHRpbmcgdG8gYWxsIDxwcmU+PGNvZGU+Li48L2NvZGU+PC9wcmU+IGJsb2NrcyBvbiBhIHBhZ2UuCiAgKi8KCgogIGZ1bmN0aW9uIGluaXRIaWdobGlnaHRpbmcoKSB7CiAgICBpZiAoaW5pdEhpZ2hsaWdodGluZy5jYWxsZWQpIHJldHVybjsKICAgIGluaXRIaWdobGlnaHRpbmcuY2FsbGVkID0gdHJ1ZTsKICAgIHZhciBibG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdwcmUgY29kZScpOwogICAgQXJyYXlQcm90by5mb3JFYWNoLmNhbGwoYmxvY2tzLCBoaWdobGlnaHRCbG9jayk7CiAgfQogIC8qCiAgQXR0YWNoZXMgaGlnaGxpZ2h0aW5nIHRvIHRoZSBwYWdlIGxvYWQgZXZlbnQuCiAgKi8KCgogIGZ1bmN0aW9uIGluaXRIaWdobGlnaHRpbmdPbkxvYWQoKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGluaXRIaWdobGlnaHRpbmcsIGZhbHNlKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgaW5pdEhpZ2hsaWdodGluZywgZmFsc2UpOwogIH0KCiAgdmFyIFBMQUlOVEVYVF9MQU5HVUFHRSA9IHsKICAgIGRpc2FibGVBdXRvZGV0ZWN0OiB0cnVlCiAgfTsKCiAgZnVuY3Rpb24gcmVnaXN0ZXJMYW5ndWFnZShuYW1lLCBsYW5ndWFnZSkgewogICAgdmFyIGxhbmc7CgogICAgdHJ5IHsKICAgICAgbGFuZyA9IGxhbmd1YWdlKGhsanMpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcigiTGFuZ3VhZ2UgZGVmaW5pdGlvbiBmb3IgJ3t9JyBjb3VsZCBub3QgYmUgcmVnaXN0ZXJlZC4iLnJlcGxhY2UoInt9IiwgbmFtZSkpOyAvLyBoYXJkIG9yIHNvZnQgZXJyb3IKCiAgICAgIGlmICghU0FGRV9NT0RFKSB7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIH0gLy8gbGFuZ3VhZ2VzIHRoYXQgaGF2ZSBzZXJpb3VzIGVycm9ycyBhcmUgcmVwbGFjZWQgd2l0aCBlc3NlbnRpYWxseSBhCiAgICAgIC8vICJwbGFpbnRleHQiIHN0YW5kLWluIHNvIHRoYXQgdGhlIGNvZGUgYmxvY2tzIHdpbGwgc3RpbGwgZ2V0IG5vcm1hbAogICAgICAvLyBjc3MgY2xhc3NlcyBhcHBsaWVkIHRvIHRoZW0gLSBhbmQgb25lIGJhZCBsYW5ndWFnZSB3b24ndCBicmVhayB0aGUKICAgICAgLy8gZW50aXJlIGhpZ2hsaWdodGVyCgoKICAgICAgbGFuZyA9IFBMQUlOVEVYVF9MQU5HVUFHRTsKICAgIH0KCiAgICBsYW5ndWFnZXNbbmFtZV0gPSBsYW5nOwogICAgcmVzdG9yZUxhbmd1YWdlQXBpKGxhbmcpOwogICAgbGFuZy5yYXdEZWZpbml0aW9uID0gbGFuZ3VhZ2UuYmluZChudWxsLCBobGpzKTsKCiAgICBpZiAobGFuZy5hbGlhc2VzKSB7CiAgICAgIGxhbmcuYWxpYXNlcy5mb3JFYWNoKGZ1bmN0aW9uIChhbGlhcykgewogICAgICAgIGFsaWFzZXNbYWxpYXNdID0gbmFtZTsKICAgICAgfSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBsaXN0TGFuZ3VhZ2VzKCkgewogICAgcmV0dXJuIG9iamVjdEtleXMobGFuZ3VhZ2VzKTsKICB9CiAgLyoKICAgIGludGVuZGVkIHVzYWdlOiBXaGVuIG9uZSBsYW5ndWFnZSB0cnVseSByZXF1aXJlcyBhbm90aGVyCiAgICAgVW5saWtlIGBnZXRMYW5ndWFnZWAsIHRoaXMgd2lsbCB0aHJvdyB3aGVuIHRoZSByZXF1ZXN0ZWQgbGFuZ3VhZ2UKICAgIGlzIG5vdCBhdmFpbGFibGUuCiAgKi8KCgogIGZ1bmN0aW9uIHJlcXVpcmVMYW5ndWFnZShuYW1lKSB7CiAgICB2YXIgbGFuZyA9IGdldExhbmd1YWdlKG5hbWUpOwoKICAgIGlmIChsYW5nKSB7CiAgICAgIHJldHVybiBsYW5nOwogICAgfQoKICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1RoZSBcJ3t9XCcgbGFuZ3VhZ2UgaXMgcmVxdWlyZWQsIGJ1dCBub3QgbG9hZGVkLicucmVwbGFjZSgne30nLCBuYW1lKSk7CiAgICB0aHJvdyBlcnI7CiAgfQoKICBmdW5jdGlvbiBnZXRMYW5ndWFnZShuYW1lKSB7CiAgICBuYW1lID0gKG5hbWUgfHwgJycpLnRvTG93ZXJDYXNlKCk7CiAgICByZXR1cm4gbGFuZ3VhZ2VzW25hbWVdIHx8IGxhbmd1YWdlc1thbGlhc2VzW25hbWVdXTsKICB9CgogIGZ1bmN0aW9uIGF1dG9EZXRlY3Rpb24obmFtZSkgewogICAgdmFyIGxhbmcgPSBnZXRMYW5ndWFnZShuYW1lKTsKICAgIHJldHVybiBsYW5nICYmICFsYW5nLmRpc2FibGVBdXRvZGV0ZWN0OwogIH0KICAvKiBJbnRlcmZhY2UgZGVmaW5pdGlvbiAqLwoKCiAgaGxqcy5oaWdobGlnaHQgPSBoaWdobGlnaHQ7CiAgaGxqcy5oaWdobGlnaHRBdXRvID0gaGlnaGxpZ2h0QXV0bzsKICBobGpzLmZpeE1hcmt1cCA9IGZpeE1hcmt1cDsKICBobGpzLmhpZ2hsaWdodEJsb2NrID0gaGlnaGxpZ2h0QmxvY2s7CiAgaGxqcy5jb25maWd1cmUgPSBjb25maWd1cmU7CiAgaGxqcy5pbml0SGlnaGxpZ2h0aW5nID0gaW5pdEhpZ2hsaWdodGluZzsKICBobGpzLmluaXRIaWdobGlnaHRpbmdPbkxvYWQgPSBpbml0SGlnaGxpZ2h0aW5nT25Mb2FkOwogIGhsanMucmVnaXN0ZXJMYW5ndWFnZSA9IHJlZ2lzdGVyTGFuZ3VhZ2U7CiAgaGxqcy5saXN0TGFuZ3VhZ2VzID0gbGlzdExhbmd1YWdlczsKICBobGpzLmdldExhbmd1YWdlID0gZ2V0TGFuZ3VhZ2U7CiAgaGxqcy5yZXF1aXJlTGFuZ3VhZ2UgPSByZXF1aXJlTGFuZ3VhZ2U7CiAgaGxqcy5hdXRvRGV0ZWN0aW9uID0gYXV0b0RldGVjdGlvbjsKICBobGpzLmluaGVyaXQgPSBpbmhlcml0OwoKICBobGpzLmRlYnVnTW9kZSA9IGZ1bmN0aW9uICgpIHsKICAgIFNBRkVfTU9ERSA9IGZhbHNlOwogIH07IC8vIENvbW1vbiByZWdleHBzCgoKICBobGpzLklERU5UX1JFID0gJ1thLXpBLVpdXFx3Kic7CiAgaGxqcy5VTkRFUlNDT1JFX0lERU5UX1JFID0gJ1thLXpBLVpfXVxcdyonOwogIGhsanMuTlVNQkVSX1JFID0gJ1xcYlxcZCsoXFwuXFxkKyk/JzsKICBobGpzLkNfTlVNQkVSX1JFID0gJygtPykoXFxiMFt4WF1bYS1mQS1GMC05XSt8KFxcYlxcZCsoXFwuXFxkKik/fFxcLlxcZCspKFtlRV1bLStdP1xcZCspPyknOyAvLyAweC4uLiwgMC4uLiwgZGVjaW1hbCwgZmxvYXQKCiAgaGxqcy5CSU5BUllfTlVNQkVSX1JFID0gJ1xcYigwYlswMV0rKSc7IC8vIDBiLi4uCgogIGhsanMuUkVfU1RBUlRFUlNfUkUgPSAnIXwhPXwhPT18JXwlPXwmfCYmfCY9fFxcKnxcXCo9fFxcK3xcXCs9fCx8LXwtPXwvPXwvfDp8O3w8PHw8PD18PD18PHw9PT18PT18PXw+Pj49fD4+PXw+PXw+Pj58Pj58PnxcXD98XFxbfFxce3xcXCh8XFxefFxcXj18XFx8fFxcfD18XFx8XFx8fH4nOyAvLyBDb21tb24gbW9kZXMKCiAgaGxqcy5CQUNLU0xBU0hfRVNDQVBFID0gewogICAgYmVnaW46ICdcXFxcW1xcc1xcU10nLAogICAgcmVsZXZhbmNlOiAwCiAgfTsKICBobGpzLkFQT1NfU1RSSU5HX01PREUgPSB7CiAgICBjbGFzc05hbWU6ICdzdHJpbmcnLAogICAgYmVnaW46ICdcJycsCiAgICBlbmQ6ICdcJycsCiAgICBpbGxlZ2FsOiAnXFxuJywKICAgIGNvbnRhaW5zOiBbaGxqcy5CQUNLU0xBU0hfRVNDQVBFXQogIH07CiAgaGxqcy5RVU9URV9TVFJJTkdfTU9ERSA9IHsKICAgIGNsYXNzTmFtZTogJ3N0cmluZycsCiAgICBiZWdpbjogJyInLAogICAgZW5kOiAnIicsCiAgICBpbGxlZ2FsOiAnXFxuJywKICAgIGNvbnRhaW5zOiBbaGxqcy5CQUNLU0xBU0hfRVNDQVBFXQogIH07CiAgaGxqcy5QSFJBU0FMX1dPUkRTX01PREUgPSB7CiAgICBiZWdpbjogL1xiKGF8YW58dGhlfGFyZXxJJ218aXNuJ3R8ZG9uJ3R8ZG9lc24ndHx3b24ndHxidXR8anVzdHxzaG91bGR8cHJldHR5fHNpbXBseXxlbm91Z2h8Z29ubmF8Z29pbmd8d3RmfHNvfHN1Y2h8d2lsbHx5b3V8eW91cnx0aGV5fGxpa2V8bW9yZSlcYi8KICB9OwoKICBobGpzLkNPTU1FTlQgPSBmdW5jdGlvbiAoYmVnaW4sIGVuZCwgaW5oZXJpdHMpIHsKICAgIHZhciBtb2RlID0gaGxqcy5pbmhlcml0KHsKICAgICAgY2xhc3NOYW1lOiAnY29tbWVudCcsCiAgICAgIGJlZ2luOiBiZWdpbiwKICAgICAgZW5kOiBlbmQsCiAgICAgIGNvbnRhaW5zOiBbXQogICAgfSwgaW5oZXJpdHMgfHwge30pOwogICAgbW9kZS5jb250YWlucy5wdXNoKGhsanMuUEhSQVNBTF9XT1JEU19NT0RFKTsKICAgIG1vZGUuY29udGFpbnMucHVzaCh7CiAgICAgIGNsYXNzTmFtZTogJ2RvY3RhZycsCiAgICAgIGJlZ2luOiAnKD86VE9ET3xGSVhNRXxOT1RFfEJVR3xYWFgpOicsCiAgICAgIHJlbGV2YW5jZTogMAogICAgfSk7CiAgICByZXR1cm4gbW9kZTsKICB9OwoKICBobGpzLkNfTElORV9DT01NRU5UX01PREUgPSBobGpzLkNPTU1FTlQoJy8vJywgJyQnKTsKICBobGpzLkNfQkxPQ0tfQ09NTUVOVF9NT0RFID0gaGxqcy5DT01NRU5UKCcvXFwqJywgJ1xcKi8nKTsKICBobGpzLkhBU0hfQ09NTUVOVF9NT0RFID0gaGxqcy5DT01NRU5UKCcjJywgJyQnKTsKICBobGpzLk5VTUJFUl9NT0RFID0gewogICAgY2xhc3NOYW1lOiAnbnVtYmVyJywKICAgIGJlZ2luOiBobGpzLk5VTUJFUl9SRSwKICAgIHJlbGV2YW5jZTogMAogIH07CiAgaGxqcy5DX05VTUJFUl9NT0RFID0gewogICAgY2xhc3NOYW1lOiAnbnVtYmVyJywKICAgIGJlZ2luOiBobGpzLkNfTlVNQkVSX1JFLAogICAgcmVsZXZhbmNlOiAwCiAgfTsKICBobGpzLkJJTkFSWV9OVU1CRVJfTU9ERSA9IHsKICAgIGNsYXNzTmFtZTogJ251bWJlcicsCiAgICBiZWdpbjogaGxqcy5CSU5BUllfTlVNQkVSX1JFLAogICAgcmVsZXZhbmNlOiAwCiAgfTsKICBobGpzLkNTU19OVU1CRVJfTU9ERSA9IHsKICAgIGNsYXNzTmFtZTogJ251bWJlcicsCiAgICBiZWdpbjogaGxqcy5OVU1CRVJfUkUgKyAnKCcgKyAnJXxlbXxleHxjaHxyZW0nICsgJ3x2d3x2aHx2bWlufHZtYXgnICsgJ3xjbXxtbXxpbnxwdHxwY3xweCcgKyAnfGRlZ3xncmFkfHJhZHx0dXJuJyArICd8c3xtcycgKyAnfEh6fGtIeicgKyAnfGRwaXxkcGNtfGRwcHgnICsgJyk/JywKICAgIHJlbGV2YW5jZTogMAogIH07CiAgaGxqcy5SRUdFWFBfTU9ERSA9IHsKICAgIGNsYXNzTmFtZTogJ3JlZ2V4cCcsCiAgICBiZWdpbjogL1wvLywKICAgIGVuZDogL1wvW2dpbXV5XSovLAogICAgaWxsZWdhbDogL1xuLywKICAgIGNvbnRhaW5zOiBbaGxqcy5CQUNLU0xBU0hfRVNDQVBFLCB7CiAgICAgIGJlZ2luOiAvXFsvLAogICAgICBlbmQ6IC9cXS8sCiAgICAgIHJlbGV2YW5jZTogMCwKICAgICAgY29udGFpbnM6IFtobGpzLkJBQ0tTTEFTSF9FU0NBUEVdCiAgICB9XQogIH07CiAgaGxqcy5USVRMRV9NT0RFID0gewogICAgY2xhc3NOYW1lOiAndGl0bGUnLAogICAgYmVnaW46IGhsanMuSURFTlRfUkUsCiAgICByZWxldmFuY2U6IDAKICB9OwogIGhsanMuVU5ERVJTQ09SRV9USVRMRV9NT0RFID0gewogICAgY2xhc3NOYW1lOiAndGl0bGUnLAogICAgYmVnaW46IGhsanMuVU5ERVJTQ09SRV9JREVOVF9SRSwKICAgIHJlbGV2YW5jZTogMAogIH07CiAgaGxqcy5NRVRIT0RfR1VBUkQgPSB7CiAgICAvLyBleGNsdWRlcyBtZXRob2QgbmFtZXMgZnJvbSBrZXl3b3JkIHByb2Nlc3NpbmcKICAgIGJlZ2luOiAnXFwuXFxzKicgKyBobGpzLlVOREVSU0NPUkVfSURFTlRfUkUsCiAgICByZWxldmFuY2U6IDAKICB9OwogIHZhciBjb25zdGFudHMgPSBbaGxqcy5CQUNLU0xBU0hfRVNDQVBFLCBobGpzLkFQT1NfU1RSSU5HX01PREUsIGhsanMuUVVPVEVfU1RSSU5HX01PREUsIGhsanMuUEhSQVNBTF9XT1JEU19NT0RFLCBobGpzLkNPTU1FTlQsIGhsanMuQ19MSU5FX0NPTU1FTlRfTU9ERSwgaGxqcy5DX0JMT0NLX0NPTU1FTlRfTU9ERSwgaGxqcy5IQVNIX0NPTU1FTlRfTU9ERSwgaGxqcy5OVU1CRVJfTU9ERSwgaGxqcy5DX05VTUJFUl9NT0RFLCBobGpzLkJJTkFSWV9OVU1CRVJfTU9ERSwgaGxqcy5DU1NfTlVNQkVSX01PREUsIGhsanMuUkVHRVhQX01PREUsIGhsanMuVElUTEVfTU9ERSwgaGxqcy5VTkRFUlNDT1JFX1RJVExFX01PREUsIGhsanMuTUVUSE9EX0dVQVJEXTsKICBjb25zdGFudHMuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7CiAgICBkZWVwRnJlZXplKG9iaik7CiAgfSk7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zdWJzdGFjay9kZWVwLWZyZWV6ZS9ibG9iL21hc3Rlci9pbmRleC5qcwoKICBmdW5jdGlvbiBkZWVwRnJlZXplKG8pIHsKICAgIE9iamVjdC5mcmVlemUobyk7CiAgICB2YXIgb2JqSXNGdW5jdGlvbiA9IHR5cGVvZiBvID09PSAnZnVuY3Rpb24nOwogICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobykuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkgewogICAgICBpZiAoby5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBvW3Byb3BdICE9PSBudWxsICYmIChfdHlwZW9mKG9bcHJvcF0pID09PSAib2JqZWN0IiB8fCB0eXBlb2Ygb1twcm9wXSA9PT0gImZ1bmN0aW9uIikgLy8gSUUxMSBmaXg6IGh0dHBzOi8vZ2l0aHViLmNvbS9oaWdobGlnaHRqcy9oaWdobGlnaHQuanMvaXNzdWVzLzIzMTgKICAgICAgLy8gVE9ETzogcmVtb3ZlIGluIHRoZSBmdXR1cmUKICAgICAgJiYgKG9iaklzRnVuY3Rpb24gPyBwcm9wICE9PSAnY2FsbGVyJyAmJiBwcm9wICE9PSAnY2FsbGVlJyAmJiBwcm9wICE9PSAnYXJndW1lbnRzJyA6IHRydWUpICYmICFPYmplY3QuaXNGcm96ZW4ob1twcm9wXSkpIHsKICAgICAgICBkZWVwRnJlZXplKG9bcHJvcF0pOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBvOwogIH0KCiAgOwogIHJldHVybiBobGpzOwp9KTs="},{"version":3,"sources":["/Users/lichongbing/Downloads/vuepress-starter/docs/.vuepress/vuepress-plugin-code-style-mac/highlight.js/lib/highlight.js"],"names":["factory","globalObject","window","self","exports","nodeType","hljs","define","amd","showedUpgradeWarning","ArrayProto","objectKeys","Object","keys","languages","create","aliases","SAFE_MODE","noHighlightRe","languagePrefixRe","fixMarkupRe","API_REPLACES","spanEndTag","LANGUAGE_NOT_FOUND","options","hideUpgradeWarningAcceptNoSupportOrSecurityUpdates","classPrefix","tabReplace","useBR","undefined","COMMON_KEYWORDS","split","escape","value","replace","tag","node","nodeName","toLowerCase","testRe","re","lexeme","match","exec","index","isNotHighlighted","language","test","blockLanguage","block","i","length","_class","classes","className","parentNode","getLanguage","console","warn","inherit","parent","key","result","objects","Array","prototype","slice","call","arguments","forEach","obj","nodeStream","_nodeStream","offset","child","firstChild","nextSibling","nodeValue","push","event","mergeStreams","original","highlighted","processed","nodeStack","selectStream","open","attr_str","a","map","attributes","join","close","render","stream","substring","reverse","splice","pop","substr","dependencyOnParent","mode","endsWithParent","starts","expand_or_clone_mode","variants","cached_variants","variant","isFrozen","restoreLanguageApi","langApiRestored","contains","concat","compileKeywords","rawKeywords","case_insensitive","compiled_keywords","splitAndCompile","str","keyword","pair","scoreForKeyword","providedScore","Number","commonKeyword","word","indexOf","compileLanguage","reStr","source","langRe","global","RegExp","reCountMatchGroups","toString","joinRe","regexps","separator","backreferenceRe","numCaptures","ret","String","buildModeRegex","matchIndexes","matcherRe","regexes","matcher","matchAt","addRule","rule","regex","term","beginKeywords","begin","terminator_end","illegal","terminators","el","lastIndex","s","type","extra","compileMode","compiled","keywords","lexemesRe","lexemes","beginRe","endSameAsBegin","end","endRe","illegalRe","relevance","apply","c","Error","filter","hideUpgradeWarning","process","env","highlight","languageName","code","ignore_illegals","continuation","log","codeToHighlight","escapeRe","endOfMode","endsParent","keywordMatch","match_str","hasOwnProperty","buildSpan","insideSpan","leaveOpen","noPrefix","openSpan","closeSpan","processKeywords","keyword_match","last_index","top","mode_buffer","processSubLanguage","explicit","subLanguage","continuations","highlightAuto","processBuffer","startNewMode","doBeginMatch","new_mode","skip","excludeBegin","returnBegin","doEndMatch","matchPlusRemainder","end_mode","origin","returnEnd","excludeEnd","lastMatch","processLexeme","text_before_match","error","current","count","err","message","errorRaised","languageSubset","second_best","autoDetection","name","fixMarkup","p1","buildClassName","prevClassName","currentLang","resultLang","trim","highlightBlock","originalStream","resultNode","text","document","createElement","innerHTML","textContent","configure","user_options","initHighlighting","called","blocks","querySelectorAll","initHighlightingOnLoad","addEventListener","PLAINTEXT_LANGUAGE","disableAutodetect","registerLanguage","lang","rawDefinition","bind","alias","listLanguages","requireLanguage","debugMode","IDENT_RE","UNDERSCORE_IDENT_RE","NUMBER_RE","C_NUMBER_RE","BINARY_NUMBER_RE","RE_STARTERS_RE","BACKSLASH_ESCAPE","APOS_STRING_MODE","QUOTE_STRING_MODE","PHRASAL_WORDS_MODE","COMMENT","inherits","C_LINE_COMMENT_MODE","C_BLOCK_COMMENT_MODE","HASH_COMMENT_MODE","NUMBER_MODE","C_NUMBER_MODE","BINARY_NUMBER_MODE","CSS_NUMBER_MODE","REGEXP_MODE","TITLE_MODE","UNDERSCORE_TITLE_MODE","METHOD_GUARD","constants","deepFreeze","o","freeze","objIsFunction","getOwnPropertyNames","prop"],"mappings":"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","sourcesContent":["/*\nSyntax highlighting with language autodetection.\nhttps://highlightjs.org/\n*/\n\n(function(factory) {\n\n  // Find the global object for export to both the browser and web workers.\n  var globalObject = typeof window === 'object' && window ||\n                     typeof self === 'object' && self;\n\n  // Setup highlight.js for different environments. First is Node.js or\n  // CommonJS.\n  // `nodeType` is checked to ensure that `exports` is not a HTML element.\n  if(typeof exports !== 'undefined' && !exports.nodeType) {\n    factory(exports);\n  } else if(globalObject) {\n    // Export hljs globally even when using AMD for cases when this script\n    // is loaded with others that may still expect a global hljs.\n    globalObject.hljs = factory({});\n\n    // Finally register the global hljs with AMD.\n    if(typeof define === 'function' && define.amd) {\n      define([], function() {\n        return globalObject.hljs;\n      });\n    }\n  }\n\n}(function(hljs) {\n  var showedUpgradeWarning = false;\n\n  // Convenience variables for build-in objects\n  var ArrayProto = [],\n      objectKeys = Object.keys;\n\n  // Global internal variables used within the highlight.js library.\n  var languages = Object.create(null),\n      aliases   = Object.create(null);\n\n  // safe/production mode - swallows more errors, tries to keep running\n  // even if a single syntax or parse hits a fatal error\n  var SAFE_MODE = true;\n\n  // Regular expressions used throughout the highlight.js library.\n  var noHighlightRe    = /^(no-?highlight|plain|text)$/i,\n      languagePrefixRe = /\\blang(?:uage)?-([\\w-]+)\\b/i,\n      fixMarkupRe      = /((^(<[^>]+>|\\t|)+|(?:\\n)))/gm;\n\n  // The object will be assigned by the build tool. It used to synchronize API\n  // of external language files with minified version of the highlight.js library.\n  var API_REPLACES;\n\n  var spanEndTag = '</span>';\n  var LANGUAGE_NOT_FOUND = \"Could not find the language '{}', did you forget to load/include a language module?\";\n\n  // Global options used when within external APIs. This is modified when\n  // calling the `hljs.configure` function.\n  var options = {\n    hideUpgradeWarningAcceptNoSupportOrSecurityUpdates: false,\n    classPrefix: 'hljs-',\n    tabReplace: null,\n    useBR: false,\n    languages: undefined\n  };\n\n  // keywords that should have no default relevance value\n  var COMMON_KEYWORDS = 'of and for in not or if then'.split(' ');\n\n\n  /* Utility functions */\n\n  function escape(value) {\n    return value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n\n  function tag(node) {\n    return node.nodeName.toLowerCase();\n  }\n\n  function testRe(re, lexeme) {\n    var match = re && re.exec(lexeme);\n    return match && match.index === 0;\n  }\n\n  function isNotHighlighted(language) {\n    return noHighlightRe.test(language);\n  }\n\n  function blockLanguage(block) {\n    var i, match, length, _class;\n    var classes = block.className + ' ';\n\n    classes += block.parentNode ? block.parentNode.className : '';\n\n    // language-* takes precedence over non-prefixed class names.\n    match = languagePrefixRe.exec(classes);\n    if (match) {\n      var language = getLanguage(match[1]);\n      if (!language) {\n        console.warn(LANGUAGE_NOT_FOUND.replace(\"{}\", match[1]));\n        console.warn(\"Falling back to no-highlight mode for this block.\", block);\n      }\n      return language ? match[1] : 'no-highlight';\n    }\n\n    classes = classes.split(/\\s+/);\n\n    for (i = 0, length = classes.length; i < length; i++) {\n      _class = classes[i];\n\n      if (isNotHighlighted(_class) || getLanguage(_class)) {\n        return _class;\n      }\n    }\n  }\n\n  /**\n   * performs a shallow merge of multiple objects into one\n   *\n   * @arguments list of objects with properties to merge\n   * @returns a single new object\n   */\n  function inherit(parent) {  // inherit(parent, override_obj, override_obj, ...)\n    var key;\n    var result = {};\n    var objects = Array.prototype.slice.call(arguments, 1);\n\n    for (key in parent)\n      result[key] = parent[key];\n    objects.forEach(function(obj) {\n      for (key in obj)\n        result[key] = obj[key];\n    });\n    return result;\n  }\n\n  /* Stream merging */\n\n  function nodeStream(node) {\n    var result = [];\n    (function _nodeStream(node, offset) {\n      for (var child = node.firstChild; child; child = child.nextSibling) {\n        if (child.nodeType === 3)\n          offset += child.nodeValue.length;\n        else if (child.nodeType === 1) {\n          result.push({\n            event: 'start',\n            offset: offset,\n            node: child\n          });\n          offset = _nodeStream(child, offset);\n          // Prevent void elements from having an end tag that would actually\n          // double them in the output. There are more void elements in HTML\n          // but we list only those realistically expected in code display.\n          if (!tag(child).match(/br|hr|img|input/)) {\n            result.push({\n              event: 'stop',\n              offset: offset,\n              node: child\n            });\n          }\n        }\n      }\n      return offset;\n    })(node, 0);\n    return result;\n  }\n\n  function mergeStreams(original, highlighted, value) {\n    var processed = 0;\n    var result = '';\n    var nodeStack = [];\n\n    function selectStream() {\n      if (!original.length || !highlighted.length) {\n        return original.length ? original : highlighted;\n      }\n      if (original[0].offset !== highlighted[0].offset) {\n        return (original[0].offset < highlighted[0].offset) ? original : highlighted;\n      }\n\n      /*\n      To avoid starting the stream just before it should stop the order is\n      ensured that original always starts first and closes last:\n\n      if (event1 == 'start' && event2 == 'start')\n        return original;\n      if (event1 == 'start' && event2 == 'stop')\n        return highlighted;\n      if (event1 == 'stop' && event2 == 'start')\n        return original;\n      if (event1 == 'stop' && event2 == 'stop')\n        return highlighted;\n\n      ... which is collapsed to:\n      */\n      return highlighted[0].event === 'start' ? original : highlighted;\n    }\n\n    function open(node) {\n      function attr_str(a) {\n        return ' ' + a.nodeName + '=\"' + escape(a.value).replace(/\"/g, '&quot;') + '\"';\n      }\n      result += '<' + tag(node) + ArrayProto.map.call(node.attributes, attr_str).join('') + '>';\n    }\n\n    function close(node) {\n      result += '</' + tag(node) + '>';\n    }\n\n    function render(event) {\n      (event.event === 'start' ? open : close)(event.node);\n    }\n\n    while (original.length || highlighted.length) {\n      var stream = selectStream();\n      result += escape(value.substring(processed, stream[0].offset));\n      processed = stream[0].offset;\n      if (stream === original) {\n        /*\n        On any opening or closing tag of the original markup we first close\n        the entire highlighted node stack, then render the original tag along\n        with all the following original tags at the same offset and then\n        reopen all the tags on the highlighted stack.\n        */\n        nodeStack.reverse().forEach(close);\n        do {\n          render(stream.splice(0, 1)[0]);\n          stream = selectStream();\n        } while (stream === original && stream.length && stream[0].offset === processed);\n        nodeStack.reverse().forEach(open);\n      } else {\n        if (stream[0].event === 'start') {\n          nodeStack.push(stream[0].node);\n        } else {\n          nodeStack.pop();\n        }\n        render(stream.splice(0, 1)[0]);\n      }\n    }\n    return result + escape(value.substr(processed));\n  }\n\n  /* Initialization */\n\n  function dependencyOnParent(mode) {\n    if (!mode) return false;\n\n    return mode.endsWithParent || dependencyOnParent(mode.starts);\n  }\n\n  function expand_or_clone_mode(mode) {\n    if (mode.variants && !mode.cached_variants) {\n      mode.cached_variants = mode.variants.map(function(variant) {\n        return inherit(mode, {variants: null}, variant);\n      });\n    }\n\n    // EXPAND\n    // if we have variants then essentially \"replace\" the mode with the variants\n    // this happens in compileMode, where this function is called from\n    if (mode.cached_variants)\n      return mode.cached_variants;\n\n    // CLONE\n    // if we have dependencies on parents then we need a unique\n    // instance of ourselves, so we can be reused with many\n    // different parents without issue\n    if (dependencyOnParent(mode))\n      return [inherit(mode, { starts: mode.starts ? inherit(mode.starts) : null })];\n\n    if (Object.isFrozen(mode))\n      return [inherit(mode)];\n\n    // no special dependency issues, just return ourselves\n    return [mode];\n  }\n\n  function restoreLanguageApi(obj) {\n    if(API_REPLACES && !obj.langApiRestored) {\n      obj.langApiRestored = true;\n      for(var key in API_REPLACES) {\n        if (obj[key]) {\n          obj[API_REPLACES[key]] = obj[key];\n        }\n      }\n      (obj.contains || []).concat(obj.variants || []).forEach(restoreLanguageApi);\n    }\n  }\n\n  function compileKeywords(rawKeywords, case_insensitive) {\n      var compiled_keywords = {};\n\n      if (typeof rawKeywords === 'string') { // string\n        splitAndCompile('keyword', rawKeywords);\n      } else {\n        objectKeys(rawKeywords).forEach(function (className) {\n          splitAndCompile(className, rawKeywords[className]);\n        });\n      }\n    return compiled_keywords;\n\n    // ---\n\n    function splitAndCompile(className, str) {\n      if (case_insensitive) {\n        str = str.toLowerCase();\n      }\n      str.split(' ').forEach(function(keyword) {\n        var pair = keyword.split('|');\n        compiled_keywords[pair[0]] = [className, scoreForKeyword(pair[0], pair[1])];\n      });\n    }\n  }\n\n  function scoreForKeyword(keyword, providedScore) {\n    // manual scores always win over common keywords\n    // so you can force a score of 1 if you really insist\n    if (providedScore)\n      return Number(providedScore);\n\n    return commonKeyword(keyword) ? 0 : 1;\n  }\n\n  function commonKeyword(word) {\n    return COMMON_KEYWORDS.indexOf(word.toLowerCase()) != -1;\n  }\n\n  function compileLanguage(language) {\n\n    function reStr(re) {\n        return (re && re.source) || re;\n    }\n\n    function langRe(value, global) {\n      return new RegExp(\n        reStr(value),\n        'm' + (language.case_insensitive ? 'i' : '') + (global ? 'g' : '')\n      );\n    }\n\n    function reCountMatchGroups(re) {\n      return (new RegExp(re.toString() + '|')).exec('').length - 1;\n    }\n\n    // joinRe logically computes regexps.join(separator), but fixes the\n    // backreferences so they continue to match.\n    // it also places each individual regular expression into it's own\n    // match group, keeping track of the sequencing of those match groups\n    // is currently an exercise for the caller. :-)\n    function joinRe(regexps, separator) {\n      // backreferenceRe matches an open parenthesis or backreference. To avoid\n      // an incorrect parse, it additionally matches the following:\n      // - [...] elements, where the meaning of parentheses and escapes change\n      // - other escape sequences, so we do not misparse escape sequences as\n      //   interesting elements\n      // - non-matching or lookahead parentheses, which do not capture. These\n      //   follow the '(' with a '?'.\n      var backreferenceRe = /\\[(?:[^\\\\\\]]|\\\\.)*\\]|\\(\\??|\\\\([1-9][0-9]*)|\\\\./;\n      var numCaptures = 0;\n      var ret = '';\n      for (var i = 0; i < regexps.length; i++) {\n        numCaptures += 1;\n        var offset = numCaptures;\n        var re = reStr(regexps[i]);\n        if (i > 0) {\n          ret += separator;\n        }\n        ret += \"(\";\n        while (re.length > 0) {\n          var match = backreferenceRe.exec(re);\n          if (match == null) {\n            ret += re;\n            break;\n          }\n          ret += re.substring(0, match.index);\n          re = re.substring(match.index + match[0].length);\n          if (match[0][0] == '\\\\' && match[1]) {\n            // Adjust the backreference.\n            ret += '\\\\' + String(Number(match[1]) + offset);\n          } else {\n            ret += match[0];\n            if (match[0] == '(') {\n              numCaptures++;\n            }\n          }\n        }\n        ret += \")\";\n      }\n      return ret;\n    }\n\n    function buildModeRegex(mode) {\n\n      var matchIndexes = {};\n      var matcherRe;\n      var regexes = [];\n      var matcher = {};\n      var matchAt = 1;\n\n      function addRule(rule, regex) {\n        matchIndexes[matchAt] = rule;\n        regexes.push([rule, regex]);\n        matchAt += reCountMatchGroups(regex) + 1;\n      }\n\n      var term;\n      for (var i=0; i < mode.contains.length; i++) {\n        var re;\n        term = mode.contains[i];\n        if (term.beginKeywords) {\n          re = '\\\\.?(?:' + term.begin + ')\\\\.?';\n        } else {\n          re = term.begin;\n        }\n        addRule(term, re);\n      }\n      if (mode.terminator_end)\n        addRule(\"end\", mode.terminator_end);\n      if (mode.illegal)\n        addRule(\"illegal\", mode.illegal);\n\n      var terminators = regexes.map(function(el) { return el[1]; });\n      matcherRe = langRe(joinRe(terminators, '|'), true);\n\n      matcher.lastIndex = 0;\n      matcher.exec = function(s) {\n        var rule;\n\n        if( regexes.length === 0) return null;\n\n        matcherRe.lastIndex = matcher.lastIndex;\n        var match = matcherRe.exec(s);\n        if (!match) { return null; }\n\n        for(var i = 0; i<match.length; i++) {\n          if (match[i] != undefined && matchIndexes[\"\" +i] != undefined ) {\n            rule = matchIndexes[\"\"+i];\n            break;\n          }\n        }\n\n        // illegal or end match\n        if (typeof rule === \"string\") {\n          match.type = rule;\n          match.extra = [mode.illegal, mode.terminator_end];\n        } else {\n          match.type = \"begin\";\n          match.rule = rule;\n        }\n        return match;\n      };\n\n      return matcher;\n    }\n\n    function compileMode(mode, parent) {\n      if (mode.compiled)\n        return;\n      mode.compiled = true;\n\n      mode.keywords = mode.keywords || mode.beginKeywords;\n      if (mode.keywords)\n        mode.keywords = compileKeywords(mode.keywords, language.case_insensitive);\n\n      mode.lexemesRe = langRe(mode.lexemes || /\\w+/, true);\n\n      if (parent) {\n        if (mode.beginKeywords) {\n          mode.begin = '\\\\b(' + mode.beginKeywords.split(' ').join('|') + ')\\\\b';\n        }\n        if (!mode.begin)\n          mode.begin = /\\B|\\b/;\n        mode.beginRe = langRe(mode.begin);\n        if (mode.endSameAsBegin)\n          mode.end = mode.begin;\n        if (!mode.end && !mode.endsWithParent)\n          mode.end = /\\B|\\b/;\n        if (mode.end)\n          mode.endRe = langRe(mode.end);\n        mode.terminator_end = reStr(mode.end) || '';\n        if (mode.endsWithParent && parent.terminator_end)\n          mode.terminator_end += (mode.end ? '|' : '') + parent.terminator_end;\n      }\n      if (mode.illegal)\n        mode.illegalRe = langRe(mode.illegal);\n      if (mode.relevance == null)\n        mode.relevance = 1;\n      if (!mode.contains) {\n        mode.contains = [];\n      }\n      mode.contains = Array.prototype.concat.apply([], mode.contains.map(function(c) {\n        return expand_or_clone_mode(c === 'self' ? mode : c);\n      }));\n      mode.contains.forEach(function(c) {compileMode(c, mode);});\n\n      if (mode.starts) {\n        compileMode(mode.starts, parent);\n      }\n\n      mode.terminators = buildModeRegex(mode);\n    }\n\n    // self is not valid at the top-level\n    if (language.contains && language.contains.indexOf('self') != -1) {\n      if (!SAFE_MODE) {\n        throw new Error(\"ERR: contains `self` is not supported at the top-level of a language.  See documentation.\")\n      } else {\n        // silently remove the broken rule (effectively ignoring it), this has historically\n        // been the behavior in the past, so this removal preserves compatibility with broken\n        // grammars when running in Safe Mode\n        language.contains = language.contains.filter(function(mode) { return mode != 'self'; });\n      }\n    }\n    compileMode(language);\n  }\n\n  function hideUpgradeWarning() {\n    if (options.hideUpgradeWarningAcceptNoSupportOrSecurityUpdates)\n      return true;\n\n    if (typeof process === \"object\" && typeof process.env === \"object\" && process.env[\"HLJS_HIDE_UPGRADE_WARNING\"])\n      return true;\n  }\n\n  /**\n   * Core highlighting function.\n   *\n   * @param {string} languageName - the language to use for highlighting\n   * @param {string} code - the code to highlight\n   * @param {boolean} ignore_illegals - whether to ignore illegal matches, default is to bail\n   * @param {array<mode>} continuation - array of continuation modes\n   *\n   * @returns an object that represents the result\n   * @property {string} language - the language name\n   * @property {number} relevance - the relevance score\n   * @property {string} value - the highlighted HTML code\n   * @property {mode} top - top of the current mode stack\n   * @property {boolean} illegal - indicates whether any illegal matches were found\n  */\n  function highlight(languageName, code, ignore_illegals, continuation) {\n    if (!hideUpgradeWarning()) {\n      if (!showedUpgradeWarning) {\n        showedUpgradeWarning = true;\n        console.log(\n          \"Version 9 of Highlight.js has reached EOL and is no longer supported.\\n\" +\n          \"Please upgrade or ask whatever dependency you are using to upgrade.\\n\" +\n          \"https://github.com/highlightjs/highlight.js/issues/2877\"\n        );\n      }\n    }\n\n    var codeToHighlight = code;\n\n    function escapeRe(value) {\n      return new RegExp(value.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'm');\n    }\n\n    function endOfMode(mode, lexeme) {\n      if (testRe(mode.endRe, lexeme)) {\n        while (mode.endsParent && mode.parent) {\n          mode = mode.parent;\n        }\n        return mode;\n      }\n      if (mode.endsWithParent) {\n        return endOfMode(mode.parent, lexeme);\n      }\n    }\n\n    function keywordMatch(mode, match) {\n      var match_str = language.case_insensitive ? match[0].toLowerCase() : match[0];\n      return mode.keywords.hasOwnProperty(match_str) && mode.keywords[match_str];\n    }\n\n    function buildSpan(className, insideSpan, leaveOpen, noPrefix) {\n      if (!leaveOpen && insideSpan === '') return '';\n      if (!className) return insideSpan;\n\n      var classPrefix = noPrefix ? '' : options.classPrefix,\n          openSpan    = '<span class=\"' + classPrefix,\n          closeSpan   = leaveOpen ? '' : spanEndTag;\n\n      openSpan += className + '\">';\n\n      return openSpan + insideSpan + closeSpan;\n    }\n\n    function processKeywords() {\n      var keyword_match, last_index, match, result;\n\n      if (!top.keywords)\n        return escape(mode_buffer);\n\n      result = '';\n      last_index = 0;\n      top.lexemesRe.lastIndex = 0;\n      match = top.lexemesRe.exec(mode_buffer);\n\n      while (match) {\n        result += escape(mode_buffer.substring(last_index, match.index));\n        keyword_match = keywordMatch(top, match);\n        if (keyword_match) {\n          relevance += keyword_match[1];\n          result += buildSpan(keyword_match[0], escape(match[0]));\n        } else {\n          result += escape(match[0]);\n        }\n        last_index = top.lexemesRe.lastIndex;\n        match = top.lexemesRe.exec(mode_buffer);\n      }\n      return result + escape(mode_buffer.substr(last_index));\n    }\n\n    function processSubLanguage() {\n      var explicit = typeof top.subLanguage === 'string';\n      if (explicit && !languages[top.subLanguage]) {\n        return escape(mode_buffer);\n      }\n\n      var result = explicit ?\n                   highlight(top.subLanguage, mode_buffer, true, continuations[top.subLanguage]) :\n                   highlightAuto(mode_buffer, top.subLanguage.length ? top.subLanguage : undefined);\n\n      // Counting embedded language score towards the host language may be disabled\n      // with zeroing the containing mode relevance. Use case in point is Markdown that\n      // allows XML everywhere and makes every XML snippet to have a much larger Markdown\n      // score.\n      if (top.relevance > 0) {\n        relevance += result.relevance;\n      }\n      if (explicit) {\n        continuations[top.subLanguage] = result.top;\n      }\n      return buildSpan(result.language, result.value, false, true);\n    }\n\n    function processBuffer() {\n      result += (top.subLanguage != null ? processSubLanguage() : processKeywords());\n      mode_buffer = '';\n    }\n\n    function startNewMode(mode) {\n      result += mode.className? buildSpan(mode.className, '', true): '';\n      top = Object.create(mode, {parent: {value: top}});\n    }\n\n\n    function doBeginMatch(match) {\n      var lexeme = match[0];\n      var new_mode = match.rule;\n\n      if (new_mode && new_mode.endSameAsBegin) {\n        new_mode.endRe = escapeRe( lexeme );\n      }\n\n      if (new_mode.skip) {\n        mode_buffer += lexeme;\n      } else {\n        if (new_mode.excludeBegin) {\n          mode_buffer += lexeme;\n        }\n        processBuffer();\n        if (!new_mode.returnBegin && !new_mode.excludeBegin) {\n          mode_buffer = lexeme;\n        }\n      }\n      startNewMode(new_mode);\n      return new_mode.returnBegin ? 0 : lexeme.length;\n    }\n\n    function doEndMatch(match) {\n      var lexeme = match[0];\n      var matchPlusRemainder = codeToHighlight.substr(match.index);\n      var end_mode = endOfMode(top, matchPlusRemainder);\n      if (!end_mode) { return; }\n\n      var origin = top;\n      if (origin.skip) {\n        mode_buffer += lexeme;\n      } else {\n        if (!(origin.returnEnd || origin.excludeEnd)) {\n          mode_buffer += lexeme;\n        }\n        processBuffer();\n        if (origin.excludeEnd) {\n          mode_buffer = lexeme;\n        }\n      }\n      do {\n        if (top.className) {\n          result += spanEndTag;\n        }\n        if (!top.skip && !top.subLanguage) {\n          relevance += top.relevance;\n        }\n        top = top.parent;\n      } while (top !== end_mode.parent);\n      if (end_mode.starts) {\n        if (end_mode.endSameAsBegin) {\n          end_mode.starts.endRe = end_mode.endRe;\n        }\n        startNewMode(end_mode.starts);\n      }\n      return origin.returnEnd ? 0 : lexeme.length;\n    }\n\n    var lastMatch = {};\n    function processLexeme(text_before_match, match) {\n\n      var lexeme = match && match[0];\n\n      // add non-matched text to the current mode buffer\n      mode_buffer += text_before_match;\n\n      if (lexeme == null) {\n        processBuffer();\n        return 0;\n      }\n\n      // we've found a 0 width match and we're stuck, so we need to advance\n      // this happens when we have badly behaved rules that have optional matchers to the degree that\n      // sometimes they can end up matching nothing at all\n      // Ref: https://github.com/highlightjs/highlight.js/issues/2140\n      if (lastMatch.type==\"begin\" && match.type==\"end\" && lastMatch.index == match.index && lexeme === \"\") {\n        // spit the \"skipped\" character that our regex choked on back into the output sequence\n        mode_buffer += codeToHighlight.slice(match.index, match.index + 1);\n        return 1;\n      }\n\n      // edge case for when illegal matches $ (end of line) which is technically\n      // a 0 width match but not a begin/end match so it's not caught by the\n      // first handler (when ignoreIllegals is true)\n      // https://github.com/highlightjs/highlight.js/issues/2522\n      if (lastMatch.type===\"illegal\" && lexeme === \"\") {\n        mode_buffer += codeToHighlight.slice(match.index, match.index + 1);\n        return 1;\n      }\n\n      lastMatch = match;\n\n      if (match.type===\"begin\") {\n        return doBeginMatch(match);\n      } else if (match.type===\"illegal\" && !ignore_illegals) {\n        // illegal match, we do not continue processing\n        throw new Error('Illegal lexeme \"' + lexeme + '\" for mode \"' + (top.className || '<unnamed>') + '\"');\n      } else if (match.type===\"end\") {\n        var processed = doEndMatch(match);\n        if (processed != undefined)\n          return processed;\n      }\n\n      /*\n      Why might be find ourselves here?  Only one occasion now.  An end match that was\n      triggered but could not be completed.  When might this happen?  When an `endSameasBegin`\n      rule sets the end rule to a specific match.  Since the overall mode termination rule that's\n      being used to scan the text isn't recompiled that means that any match that LOOKS like\n      the end (but is not, because it is not an exact match to the beginning) will\n      end up here.  A definite end match, but when `doEndMatch` tries to \"reapply\"\n      the end rule and fails to match, we wind up here, and just silently ignore the end.\n\n      This causes no real harm other than stopping a few times too many.\n      */\n\n      mode_buffer += lexeme;\n      return lexeme.length;\n    }\n\n    var language = getLanguage(languageName);\n    if (!language) {\n      console.error(LANGUAGE_NOT_FOUND.replace(\"{}\", languageName));\n      throw new Error('Unknown language: \"' + languageName + '\"');\n    }\n\n    compileLanguage(language);\n    var top = continuation || language;\n    var continuations = {}; // keep continuations for sub-languages\n    var result = '', current;\n    for(current = top; current !== language; current = current.parent) {\n      if (current.className) {\n        result = buildSpan(current.className, '', true) + result;\n      }\n    }\n    var mode_buffer = '';\n    var relevance = 0;\n    try {\n      var match, count, index = 0;\n      while (true) {\n        top.terminators.lastIndex = index;\n        match = top.terminators.exec(codeToHighlight);\n        if (!match)\n          break;\n        count = processLexeme(codeToHighlight.substring(index, match.index), match);\n        index = match.index + count;\n      }\n      processLexeme(codeToHighlight.substr(index));\n      for(current = top; current.parent; current = current.parent) { // close dangling modes\n        if (current.className) {\n          result += spanEndTag;\n        }\n      }\n      return {\n        relevance: relevance,\n        value: result,\n        illegal:false,\n        language: languageName,\n        top: top\n      };\n    } catch (err) {\n      if (err.message && err.message.indexOf('Illegal') !== -1) {\n        return {\n          illegal: true,\n          relevance: 0,\n          value: escape(codeToHighlight)\n        };\n      } else if (SAFE_MODE) {\n        return {\n          relevance: 0,\n          value: escape(codeToHighlight),\n          language: languageName,\n          top: top,\n          errorRaised: err\n        };\n      } else {\n        throw err;\n      }\n    }\n  }\n\n  /*\n  Highlighting with language detection. Accepts a string with the code to\n  highlight. Returns an object with the following properties:\n\n  - language (detected language)\n  - relevance (int)\n  - value (an HTML string with highlighting markup)\n  - second_best (object with the same structure for second-best heuristically\n    detected language, may be absent)\n\n  */\n  function highlightAuto(code, languageSubset) {\n    languageSubset = languageSubset || options.languages || objectKeys(languages);\n    var result = {\n      relevance: 0,\n      value: escape(code)\n    };\n    var second_best = result;\n    languageSubset.filter(getLanguage).filter(autoDetection).forEach(function(name) {\n      var current = highlight(name, code, false);\n      current.language = name;\n      if (current.relevance > second_best.relevance) {\n        second_best = current;\n      }\n      if (current.relevance > result.relevance) {\n        second_best = result;\n        result = current;\n      }\n    });\n    if (second_best.language) {\n      result.second_best = second_best;\n    }\n    return result;\n  }\n\n  /*\n  Post-processing of the highlighted markup:\n\n  - replace TABs with something more useful\n  - replace real line-breaks with '<br>' for non-pre containers\n\n  */\n  function fixMarkup(value) {\n    if (!(options.tabReplace || options.useBR)) {\n      return value;\n    }\n\n    return value.replace(fixMarkupRe, function(match, p1) {\n        if (options.useBR && match === '\\n') {\n          return '<br>';\n        } else if (options.tabReplace) {\n          return p1.replace(/\\t/g, options.tabReplace);\n        }\n        return '';\n    });\n  }\n\n  function buildClassName(prevClassName, currentLang, resultLang) {\n    var language = currentLang ? aliases[currentLang] : resultLang,\n        result   = [prevClassName.trim()];\n\n    if (!prevClassName.match(/\\bhljs\\b/)) {\n      result.push('hljs');\n    }\n\n    if (prevClassName.indexOf(language) === -1) {\n      result.push(language);\n    }\n\n    return result.join(' ').trim();\n  }\n\n  /*\n  Applies highlighting to a DOM node containing code. Accepts a DOM node and\n  two optional parameters for fixMarkup.\n  */\n  function highlightBlock(block) {\n    var node, originalStream, result, resultNode, text;\n    var language = blockLanguage(block);\n\n    if (isNotHighlighted(language))\n        return;\n\n    if (options.useBR) {\n      node = document.createElement('div');\n      node.innerHTML = block.innerHTML.replace(/\\n/g, '').replace(/<br[ \\/]*>/g, '\\n');\n    } else {\n      node = block;\n    }\n    text = node.textContent;\n    result = language ? highlight(language, text, true) : highlightAuto(text);\n\n    originalStream = nodeStream(node);\n    if (originalStream.length) {\n      resultNode = document.createElement('div');\n      resultNode.innerHTML = result.value;\n      result.value = mergeStreams(originalStream, nodeStream(resultNode), text);\n    }\n    result.value = fixMarkup(result.value);\n\n    block.innerHTML = result.value;\n    block.className = buildClassName(block.className, language, result.language);\n    block.result = {\n      language: result.language,\n      re: result.relevance\n    };\n    if (result.second_best) {\n      block.second_best = {\n        language: result.second_best.language,\n        re: result.second_best.relevance\n      };\n    }\n  }\n\n  /*\n  Updates highlight.js global options with values passed in the form of an object.\n  */\n  function configure(user_options) {\n    options = inherit(options, user_options);\n  }\n\n  /*\n  Applies highlighting to all <pre><code>..</code></pre> blocks on a page.\n  */\n  function initHighlighting() {\n    if (initHighlighting.called)\n      return;\n    initHighlighting.called = true;\n\n    var blocks = document.querySelectorAll('pre code');\n    ArrayProto.forEach.call(blocks, highlightBlock);\n  }\n\n  /*\n  Attaches highlighting to the page load event.\n  */\n  function initHighlightingOnLoad() {\n    window.addEventListener('DOMContentLoaded', initHighlighting, false);\n    window.addEventListener('load', initHighlighting, false);\n  }\n\n  var PLAINTEXT_LANGUAGE = { disableAutodetect: true };\n\n  function registerLanguage(name, language) {\n    var lang;\n    try { lang = language(hljs); }\n    catch (error) {\n      console.error(\"Language definition for '{}' could not be registered.\".replace(\"{}\", name));\n      // hard or soft error\n      if (!SAFE_MODE) { throw error; } else { console.error(error); }\n      // languages that have serious errors are replaced with essentially a\n      // \"plaintext\" stand-in so that the code blocks will still get normal\n      // css classes applied to them - and one bad language won't break the\n      // entire highlighter\n      lang = PLAINTEXT_LANGUAGE;\n    }\n    languages[name] = lang;\n    restoreLanguageApi(lang);\n    lang.rawDefinition = language.bind(null,hljs);\n\n    if (lang.aliases) {\n      lang.aliases.forEach(function(alias) {aliases[alias] = name;});\n    }\n  }\n\n  function listLanguages() {\n    return objectKeys(languages);\n  }\n\n  /*\n    intended usage: When one language truly requires another\n\n    Unlike `getLanguage`, this will throw when the requested language\n    is not available.\n  */\n  function requireLanguage(name) {\n    var lang = getLanguage(name);\n    if (lang) { return lang; }\n\n    var err = new Error('The \\'{}\\' language is required, but not loaded.'.replace('{}',name));\n    throw err;\n  }\n\n  function getLanguage(name) {\n    name = (name || '').toLowerCase();\n    return languages[name] || languages[aliases[name]];\n  }\n\n  function autoDetection(name) {\n    var lang = getLanguage(name);\n    return lang && !lang.disableAutodetect;\n  }\n\n  /* Interface definition */\n\n  hljs.highlight = highlight;\n  hljs.highlightAuto = highlightAuto;\n  hljs.fixMarkup = fixMarkup;\n  hljs.highlightBlock = highlightBlock;\n  hljs.configure = configure;\n  hljs.initHighlighting = initHighlighting;\n  hljs.initHighlightingOnLoad = initHighlightingOnLoad;\n  hljs.registerLanguage = registerLanguage;\n  hljs.listLanguages = listLanguages;\n  hljs.getLanguage = getLanguage;\n  hljs.requireLanguage = requireLanguage;\n  hljs.autoDetection = autoDetection;\n  hljs.inherit = inherit;\n  hljs.debugMode = function() { SAFE_MODE = false; }\n\n  // Common regexps\n  hljs.IDENT_RE = '[a-zA-Z]\\\\w*';\n  hljs.UNDERSCORE_IDENT_RE = '[a-zA-Z_]\\\\w*';\n  hljs.NUMBER_RE = '\\\\b\\\\d+(\\\\.\\\\d+)?';\n  hljs.C_NUMBER_RE = '(-?)(\\\\b0[xX][a-fA-F0-9]+|(\\\\b\\\\d+(\\\\.\\\\d*)?|\\\\.\\\\d+)([eE][-+]?\\\\d+)?)'; // 0x..., 0..., decimal, float\n  hljs.BINARY_NUMBER_RE = '\\\\b(0b[01]+)'; // 0b...\n  hljs.RE_STARTERS_RE = '!|!=|!==|%|%=|&|&&|&=|\\\\*|\\\\*=|\\\\+|\\\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\\\?|\\\\[|\\\\{|\\\\(|\\\\^|\\\\^=|\\\\||\\\\|=|\\\\|\\\\||~';\n\n  // Common modes\n  hljs.BACKSLASH_ESCAPE = {\n    begin: '\\\\\\\\[\\\\s\\\\S]', relevance: 0\n  };\n  hljs.APOS_STRING_MODE = {\n    className: 'string',\n    begin: '\\'', end: '\\'',\n    illegal: '\\\\n',\n    contains: [hljs.BACKSLASH_ESCAPE]\n  };\n  hljs.QUOTE_STRING_MODE = {\n    className: 'string',\n    begin: '\"', end: '\"',\n    illegal: '\\\\n',\n    contains: [hljs.BACKSLASH_ESCAPE]\n  };\n  hljs.PHRASAL_WORDS_MODE = {\n    begin: /\\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\\b/\n  };\n  hljs.COMMENT = function (begin, end, inherits) {\n    var mode = hljs.inherit(\n      {\n        className: 'comment',\n        begin: begin, end: end,\n        contains: []\n      },\n      inherits || {}\n    );\n    mode.contains.push(hljs.PHRASAL_WORDS_MODE);\n    mode.contains.push({\n      className: 'doctag',\n      begin: '(?:TODO|FIXME|NOTE|BUG|XXX):',\n      relevance: 0\n    });\n    return mode;\n  };\n  hljs.C_LINE_COMMENT_MODE = hljs.COMMENT('//', '$');\n  hljs.C_BLOCK_COMMENT_MODE = hljs.COMMENT('/\\\\*', '\\\\*/');\n  hljs.HASH_COMMENT_MODE = hljs.COMMENT('#', '$');\n  hljs.NUMBER_MODE = {\n    className: 'number',\n    begin: hljs.NUMBER_RE,\n    relevance: 0\n  };\n  hljs.C_NUMBER_MODE = {\n    className: 'number',\n    begin: hljs.C_NUMBER_RE,\n    relevance: 0\n  };\n  hljs.BINARY_NUMBER_MODE = {\n    className: 'number',\n    begin: hljs.BINARY_NUMBER_RE,\n    relevance: 0\n  };\n  hljs.CSS_NUMBER_MODE = {\n    className: 'number',\n    begin: hljs.NUMBER_RE + '(' +\n      '%|em|ex|ch|rem'  +\n      '|vw|vh|vmin|vmax' +\n      '|cm|mm|in|pt|pc|px' +\n      '|deg|grad|rad|turn' +\n      '|s|ms' +\n      '|Hz|kHz' +\n      '|dpi|dpcm|dppx' +\n      ')?',\n    relevance: 0\n  };\n  hljs.REGEXP_MODE = {\n    className: 'regexp',\n    begin: /\\//, end: /\\/[gimuy]*/,\n    illegal: /\\n/,\n    contains: [\n      hljs.BACKSLASH_ESCAPE,\n      {\n        begin: /\\[/, end: /\\]/,\n        relevance: 0,\n        contains: [hljs.BACKSLASH_ESCAPE]\n      }\n    ]\n  };\n  hljs.TITLE_MODE = {\n    className: 'title',\n    begin: hljs.IDENT_RE,\n    relevance: 0\n  };\n  hljs.UNDERSCORE_TITLE_MODE = {\n    className: 'title',\n    begin: hljs.UNDERSCORE_IDENT_RE,\n    relevance: 0\n  };\n  hljs.METHOD_GUARD = {\n    // excludes method names from keyword processing\n    begin: '\\\\.\\\\s*' + hljs.UNDERSCORE_IDENT_RE,\n    relevance: 0\n  };\n\n  var constants = [\n    hljs.BACKSLASH_ESCAPE,\n    hljs.APOS_STRING_MODE,\n    hljs.QUOTE_STRING_MODE,\n    hljs.PHRASAL_WORDS_MODE,\n    hljs.COMMENT,\n    hljs.C_LINE_COMMENT_MODE,\n    hljs.C_BLOCK_COMMENT_MODE,\n    hljs.HASH_COMMENT_MODE,\n    hljs.NUMBER_MODE,\n    hljs.C_NUMBER_MODE,\n    hljs.BINARY_NUMBER_MODE,\n    hljs.CSS_NUMBER_MODE,\n    hljs.REGEXP_MODE,\n    hljs.TITLE_MODE,\n    hljs.UNDERSCORE_TITLE_MODE,\n    hljs.METHOD_GUARD\n  ]\n  constants.forEach(function(obj) { deepFreeze(obj); });\n\n  // https://github.com/substack/deep-freeze/blob/master/index.js\n  function deepFreeze (o) {\n    Object.freeze(o);\n\n    var objIsFunction = typeof o === 'function';\n\n    Object.getOwnPropertyNames(o).forEach(function (prop) {\n      if (o.hasOwnProperty(prop)\n      && o[prop] !== null\n      && (typeof o[prop] === \"object\" || typeof o[prop] === \"function\")\n      // IE11 fix: https://github.com/highlightjs/highlight.js/issues/2318\n      // TODO: remove in the future\n      && (objIsFunction ? prop !== 'caller' && prop !== 'callee' && prop !== 'arguments' : true)\n      && !Object.isFrozen(o[prop])) {\n        deepFreeze(o[prop]);\n      }\n    });\n\n    return o;\n  };\n\n\n  return hljs;\n}));\n"]}]}